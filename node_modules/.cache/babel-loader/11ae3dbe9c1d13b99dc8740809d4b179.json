{"ast":null,"code":"var _jsxFileName = \"/home/hp/Desktop/Bluefi/bleufi-frontend/src/components/Creator/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport \"./style.css\";\nimport { toast } from \"react-toastify\";\nimport { firestore } from \"../../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Author(props) {\n  _s();\n\n  const {\n    account\n  } = useWeb3React();\n  const id = props.data.account;\n  const {\n    imageCover,\n    avatar,\n    firstName,\n    lastName,\n    nickName,\n    bio,\n    followers // price,\n\n  } = props.data;\n  const [likes, setLikes] = useState(followers);\n  useEffect(() => {\n    setLikes(followers);\n  }, [followers]);\n\n  const followUser = async () => {\n    if (id === account) {\n      toast.error(\"You can't fallow yourself.\");\n    } else {\n      try {\n        const user_index = likes.indexOf(account);\n        let temp = [...likes];\n\n        if (user_index > -1) {\n          temp[user_index] = temp[temp.length - 1];\n          temp.pop();\n        } else {\n          temp = [...temp, account];\n        }\n\n        await firestore.collection(\"users\").doc(id).update({\n          followers: temp\n        });\n        setLikes(temp);\n        toast.success(`You ${user_index === -1 ? \"\" : \"un\"}follow ${nickName}`);\n        props.updateFollower(props.data.account);\n      } catch (err) {\n        toast.error(\"Error in following\");\n      }\n    }\n  };\n\n  const shorten = (str, len) => {\n    const arr = str.split(\" \");\n    let res = \"\";\n\n    for (let i = 0; i < arr.length; i++) {\n      if (res.length + arr[i].length + 1 < len) {\n        res += arr[i] + \" \";\n      } else {\n        res += \"...\";\n        return res;\n      }\n    }\n\n    return res;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"author\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `/creator/${id}`,\n      className: \"author__cover author__cover--bg authorImageWrapper\",\n      \"data-bg\": imageCover,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageCover,\n        width: \"100%\",\n        height: \"100%\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"author__meta bleuFrosted\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/creator/${id}`,\n        className: \"author__avatar author__avatar--verified\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: avatar,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"author__name\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/creator/${id}`,\n          children: firstName + \" \" + lastName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"author__nickname\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/creator/${id}`,\n          children: nickName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"author__text\",\n        children: shorten(bio, 80)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"author__text\",\n        children: [\"Total Sales: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"author__price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 24\n        }, this), \" BNB\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"author__wrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"author__followers\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: likes === null || likes === void 0 ? void 0 : likes.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Followers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-glow-small btn-hover-shine\",\n          type: \"button\",\n          onClick: followUser,\n          children: (likes === null || likes === void 0 ? void 0 : likes.includes(account)) ? \"Unfollow\" : \"Follow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Author, \"VO+QFtINdhV0Xnq+i/ZdbuZkibs=\", false, function () {\n  return [useWeb3React];\n});\n\n_c = Author;\nexport default Author;\n\nvar _c;\n\n$RefreshReg$(_c, \"Author\");","map":{"version":3,"sources":["/home/hp/Desktop/Bluefi/bleufi-frontend/src/components/Creator/index.js"],"names":["React","useEffect","useState","Link","useWeb3React","toast","firestore","Author","props","account","id","data","imageCover","avatar","firstName","lastName","nickName","bio","followers","likes","setLikes","followUser","error","user_index","indexOf","temp","length","pop","collection","doc","update","success","updateFollower","err","shorten","str","len","arr","split","res","i","includes"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport \"./style.css\";\nimport { toast } from \"react-toastify\";\nimport { firestore } from \"../../firebase\";\nfunction Author(props) {\n  const { account } = useWeb3React();\n  const id = props.data.account;\n  const {\n    imageCover,\n    avatar,\n    firstName,\n    lastName,\n    nickName,\n    bio,\n    followers,\n    // price,\n  } = props.data;\n  const [likes, setLikes] = useState(followers);\n  useEffect(() => {\n    setLikes(followers);\n  }, [followers]);\n  const followUser = async () => {\n    if (id === account) {\n      toast.error(\"You can't fallow yourself.\");\n    } else {\n      try {\n        const user_index = likes.indexOf(account);\n        let temp = [...likes];\n        if (user_index > -1) {\n          temp[user_index] = temp[temp.length - 1];\n          temp.pop();\n        } else {\n          temp = [...temp, account];\n        }\n        await firestore.collection(\"users\").doc(id).update({ followers: temp });\n        setLikes(temp);\n        toast.success(`You ${user_index === -1 ? \"\" : \"un\"}follow ${nickName}`);\n        props.updateFollower(props.data.account);\n      } catch (err) {\n        toast.error(\"Error in following\");\n      }\n    }\n  };\n  const shorten = (str, len) => {\n    const arr = str.split(\" \");\n    let res = \"\";\n    for (let i = 0; i < arr.length; i++) {\n      if (res.length + arr[i].length + 1 < len) {\n        res += arr[i] + \" \";\n      } else {\n        res += \"...\";\n        return res;\n      }\n    }\n    return res;\n  };\n  return (\n    <div className=\"author\">\n      <Link\n        to={`/creator/${id}`}\n        className=\"author__cover author__cover--bg authorImageWrapper\"\n        data-bg={imageCover}\n      >\n        <img src={imageCover} width=\"100%\" height=\"100%\" alt=\"\" />\n      </Link>\n      <div className=\"author__meta bleuFrosted\">\n        <Link\n          to={`/creator/${id}`}\n          className=\"author__avatar author__avatar--verified\"\n        >\n          <img src={avatar} alt=\"\" />\n        </Link>\n        <h3 className=\"author__name\">\n          <Link to={`/creator/${id}`}>{firstName + \" \" + lastName}</Link>\n        </h3>\n        <h3 className=\"author__nickname\">\n          <Link to={`/creator/${id}`}>{nickName}</Link>\n        </h3>\n        <p className=\"author__text\">{shorten(bio, 80)}</p>\n        <p className=\"author__text\">\n          Total Sales: <span className=\"author__price\"></span> BNB\n        </p>\n        <div className=\"author__wrap\">\n          <div className=\"author__followers\">\n            <p>{likes?.length}</p>\n            <span>Followers</span>\n          </div>\n          <button className=\"btn-glow-small btn-hover-shine\" type=\"button\" onClick={followUser}>\n            {likes?.includes(account) ? \"Unfollow\" : \"Follow\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default Author;\n"]},"metadata":{},"sourceType":"module"}