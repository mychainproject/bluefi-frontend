{"ast":null,"code":"var _jsxFileName = \"/home/hp/Desktop/Bluefi/bluefi-frontend/src/components/Card/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport AudioImage from \"./AudioImage\";\nimport VideoImage from \"./VideoImage\";\nimport { useDispatch } from \"react-redux\";\nimport \"./style.css\";\nimport { useHistory } from \"react-router-dom\";\nimport { firestore } from \"../../firebase\";\nimport Countdown from \"react-countdown\";\nimport { toast } from \"react-toastify\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport moment from \"moment\";\nimport ReactTooltip from \"react-tooltip\";\nimport { isCompositeComponent } from \"react-dom/test-utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Card(props) {\n  _s();\n\n  const {\n    id,\n    type,\n    image,\n    isSale,\n    imageAttach,\n    time,\n    name,\n    owner,\n    creator,\n    price,\n    saleType,\n    likes,\n    paymentType,\n    auctionCreator\n  } = props.data;\n  const dispatch = useDispatch();\n  const {\n    account\n  } = useWeb3React();\n  const history = useHistory();\n  const [ownerAvatar, setOwnerAvatar] = useState(\"assets/img/avatars/avatar.jpg\");\n  const [nickName, setNickName] = useState(\"@unkown\");\n  const [follow, setFollow] = useState(likes);\n\n  const increaseLikes = () => {\n    if (account) {\n      const user_index = follow.indexOf(account);\n\n      if (creator === account) {\n        toast.error(\"You are a creator\");\n        return;\n      }\n\n      let temp = [...follow];\n\n      if (user_index > -1) {\n        temp[user_index] = temp[temp.length - 1];\n        temp.pop();\n      } else {\n        temp = [...temp, account];\n      }\n\n      firestore.collection(\"nfts\").doc(id).update({\n        likes: temp,\n        likesCount: temp.length\n      }).then(() => {\n        setFollow(temp);\n        toast.success(`You ${user_index === -1 ? \"\" : \"un\"}like the NFT`);\n      }).catch(err => {\n        toast.error(err);\n      });\n    } else {\n      toast.error(\"Please connect your wallet first\");\n    }\n  };\n\n  const getAvatar = async () => {\n    const url = (await firestore.collection(\"users\").doc(time > 0 && auctionCreator ? auctionCreator : owner).get()).data();\n\n    if (url) {\n      setOwnerAvatar(url === null || url === void 0 ? void 0 : url.avatar);\n      setNickName(url === null || url === void 0 ? void 0 : url.nickName);\n    }\n  };\n\n  useEffect(() => {\n    getAvatar(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [owner]);\n  useEffect(() => {\n    setFollow(props.data.likes);\n  }, [props.data]);\n\n  const dispatchNftItem = async payload => {\n    await dispatch({\n      type: \"SET_SELECTED\",\n      payload\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"nftCard bleuFrosted\",\n    onClick: () => history.push(`/item/${id}`),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nftCardImageWrapper\",\n      children: type === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: image,\n        className: \"nftCardImage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this) : type === \"audio\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/assets/img/posts/1.jpg\",\n        className: \"nftCardImage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nftCardContent\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nftCardTitle mb-1\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nftCardCollection mb-2\",\n        children: nickName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nftCardPillPriceWrapper \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://i.ibb.co/qMsBFtL/Binance-Logo.png\",\n            className: \"nftCardPillCurrencyImage mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [price, \" BNB\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Card, \"WeHahrAu1p6jbES0jT2F/GI/Ha0=\", false, function () {\n  return [useDispatch, useWeb3React, useHistory];\n});\n\n_c = Card;\nexport default Card;\n\nvar _c;\n\n$RefreshReg$(_c, \"Card\");","map":{"version":3,"sources":["/home/hp/Desktop/Bluefi/bluefi-frontend/src/components/Card/index.js"],"names":["React","useEffect","useState","AudioImage","VideoImage","useDispatch","useHistory","firestore","Countdown","toast","useWeb3React","moment","ReactTooltip","isCompositeComponent","Card","props","id","type","image","isSale","imageAttach","time","name","owner","creator","price","saleType","likes","paymentType","auctionCreator","data","dispatch","account","history","ownerAvatar","setOwnerAvatar","nickName","setNickName","follow","setFollow","increaseLikes","user_index","indexOf","error","temp","length","pop","collection","doc","update","likesCount","then","success","catch","err","getAvatar","url","get","avatar","dispatchNftItem","payload","push"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAO,aAAP;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,SAAT,QAA0B,gBAA1B;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,SAASC,oBAAT,QAAqC,sBAArC;;;AAEA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AAAA;;AACnB,QAAM;AACJC,IAAAA,EADI;AAEJC,IAAAA,IAFI;AAGJC,IAAAA,KAHI;AAIJC,IAAAA,MAJI;AAKJC,IAAAA,WALI;AAMJC,IAAAA,IANI;AAOJC,IAAAA,IAPI;AAQJC,IAAAA,KARI;AASJC,IAAAA,OATI;AAUJC,IAAAA,KAVI;AAWJC,IAAAA,QAXI;AAYJC,IAAAA,KAZI;AAaJC,IAAAA,WAbI;AAcJC,IAAAA;AAdI,MAeFd,KAAK,CAACe,IAfV;AAiBA,QAAMC,QAAQ,GAAG1B,WAAW,EAA5B;AACA,QAAM;AAAE2B,IAAAA;AAAF,MAActB,YAAY,EAAhC;AACA,QAAMuB,OAAO,GAAG3B,UAAU,EAA1B;AACA,QAAM,CAAC4B,WAAD,EAAcC,cAAd,IAAgCjC,QAAQ,CAC5C,+BAD4C,CAA9C;AAGA,QAAM,CAACkC,QAAD,EAAWC,WAAX,IAA0BnC,QAAQ,CAAC,SAAD,CAAxC;AACA,QAAM,CAACoC,MAAD,EAASC,SAAT,IAAsBrC,QAAQ,CAACyB,KAAD,CAApC;;AACA,QAAMa,aAAa,GAAG,MAAM;AAC1B,QAAIR,OAAJ,EAAa;AACX,YAAMS,UAAU,GAAGH,MAAM,CAACI,OAAP,CAAeV,OAAf,CAAnB;;AACA,UAAIR,OAAO,KAAKQ,OAAhB,EAAyB;AACvBvB,QAAAA,KAAK,CAACkC,KAAN,CAAY,mBAAZ;AACA;AACD;;AACD,UAAIC,IAAI,GAAG,CAAC,GAAGN,MAAJ,CAAX;;AACA,UAAIG,UAAU,GAAG,CAAC,CAAlB,EAAqB;AACnBG,QAAAA,IAAI,CAACH,UAAD,CAAJ,GAAmBG,IAAI,CAACA,IAAI,CAACC,MAAL,GAAc,CAAf,CAAvB;AACAD,QAAAA,IAAI,CAACE,GAAL;AACD,OAHD,MAGO;AACLF,QAAAA,IAAI,GAAG,CAAC,GAAGA,IAAJ,EAAUZ,OAAV,CAAP;AACD;;AACDzB,MAAAA,SAAS,CACNwC,UADH,CACc,MADd,EAEGC,GAFH,CAEOhC,EAFP,EAGGiC,MAHH,CAGU;AAAEtB,QAAAA,KAAK,EAAEiB,IAAT;AAAeM,QAAAA,UAAU,EAAEN,IAAI,CAACC;AAAhC,OAHV,EAIGM,IAJH,CAIQ,MAAM;AACVZ,QAAAA,SAAS,CAACK,IAAD,CAAT;AACAnC,QAAAA,KAAK,CAAC2C,OAAN,CAAe,OAAMX,UAAU,KAAK,CAAC,CAAhB,GAAoB,EAApB,GAAyB,IAAK,cAAnD;AACD,OAPH,EAQGY,KARH,CAQUC,GAAD,IAAS;AACd7C,QAAAA,KAAK,CAACkC,KAAN,CAAYW,GAAZ;AACD,OAVH;AAWD,KAxBD,MAwBO;AACL7C,MAAAA,KAAK,CAACkC,KAAN,CAAY,kCAAZ;AACD;AACF,GA5BD;;AA8BA,QAAMY,SAAS,GAAG,YAAY;AAC5B,UAAMC,GAAG,GAAG,CACV,MAAMjD,SAAS,CACZwC,UADG,CACQ,OADR,EAEHC,GAFG,CAEC3B,IAAI,GAAG,CAAP,IAAYQ,cAAZ,GAA6BA,cAA7B,GAA8CN,KAF/C,EAGHkC,GAHG,EADI,EAKV3B,IALU,EAAZ;;AAMA,QAAI0B,GAAJ,EAAS;AACPrB,MAAAA,cAAc,CAACqB,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEE,MAAN,CAAd;AACArB,MAAAA,WAAW,CAACmB,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEpB,QAAN,CAAX;AACD;AACF,GAXD;;AAYAnC,EAAAA,SAAS,CAAC,MAAM;AACdsD,IAAAA,SAAS,GADK,CAEd;AACD,GAHQ,EAGN,CAAChC,KAAD,CAHM,CAAT;AAIAtB,EAAAA,SAAS,CAAC,MAAM;AACdsC,IAAAA,SAAS,CAACxB,KAAK,CAACe,IAAN,CAAWH,KAAZ,CAAT;AACD,GAFQ,EAEN,CAACZ,KAAK,CAACe,IAAP,CAFM,CAAT;;AAIA,QAAM6B,eAAe,GAAG,MAAOC,OAAP,IAAmB;AACzC,UAAM7B,QAAQ,CAAC;AAAEd,MAAAA,IAAI,EAAE,cAAR;AAAwB2C,MAAAA;AAAxB,KAAD,CAAd;AACD,GAFD;;AAIA,sBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAqC,IAAA,OAAO,EAAE,MAAM3B,OAAO,CAAC4B,IAAR,CAAc,SAAQ7C,EAAG,EAAzB,CAApD;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA,gBACGC,IAAI,KAAK,OAAT,gBACC;AAAK,QAAA,GAAG,EAAEC,KAAV;AAAiB,QAAA,SAAS,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,cADD,GAEGD,IAAI,KAAK,OAAT,gBACF;AAAK,QAAA,GAAG,EAAC,yBAAT;AAAmC,QAAA,SAAS,EAAC;AAA7C;AAAA;AAAA;AAAA;AAAA,cADE,GAEA;AALN;AAAA;AAAA;AAAA;AAAA,YADF,eAQE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,kBAAoCK;AAApC;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA,kBAAyCc;AAAzC;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA,kCACE;AACE,YAAA,GAAG,EAAC,2CADN;AAEE,YAAA,SAAS,EAAC;AAFZ;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE;AAAA,uBAASX,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA,YARF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwBD;;GAxGQX,I;UAkBUT,W,EACGK,Y,EACJJ,U;;;KApBTQ,I;AA0GT,eAAeA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport AudioImage from \"./AudioImage\";\nimport VideoImage from \"./VideoImage\";\nimport { useDispatch } from \"react-redux\";\nimport \"./style.css\";\nimport { useHistory } from \"react-router-dom\";\nimport { firestore } from \"../../firebase\";\nimport Countdown from \"react-countdown\";\nimport { toast } from \"react-toastify\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport moment from \"moment\";\nimport ReactTooltip from \"react-tooltip\";\nimport { isCompositeComponent } from \"react-dom/test-utils\";\n\nfunction Card(props) {\n  const {\n    id,\n    type,\n    image,\n    isSale,\n    imageAttach,\n    time,\n    name,\n    owner,\n    creator,\n    price,\n    saleType,\n    likes,\n    paymentType,\n    auctionCreator,\n  } = props.data;\n\n  const dispatch = useDispatch();\n  const { account } = useWeb3React();\n  const history = useHistory();\n  const [ownerAvatar, setOwnerAvatar] = useState(\n    \"assets/img/avatars/avatar.jpg\"\n  );\n  const [nickName, setNickName] = useState(\"@unkown\");\n  const [follow, setFollow] = useState(likes);\n  const increaseLikes = () => {\n    if (account) {\n      const user_index = follow.indexOf(account);\n      if (creator === account) {\n        toast.error(\"You are a creator\");\n        return;\n      }\n      let temp = [...follow];\n      if (user_index > -1) {\n        temp[user_index] = temp[temp.length - 1];\n        temp.pop();\n      } else {\n        temp = [...temp, account];\n      }\n      firestore\n        .collection(\"nfts\")\n        .doc(id)\n        .update({ likes: temp, likesCount: temp.length })\n        .then(() => {\n          setFollow(temp);\n          toast.success(`You ${user_index === -1 ? \"\" : \"un\"}like the NFT`);\n        })\n        .catch((err) => {\n          toast.error(err);\n        });\n    } else {\n      toast.error(\"Please connect your wallet first\");\n    }\n  };\n\n  const getAvatar = async () => {\n    const url = (\n      await firestore\n        .collection(\"users\")\n        .doc(time > 0 && auctionCreator ? auctionCreator : owner)\n        .get()\n    ).data();\n    if (url) {\n      setOwnerAvatar(url?.avatar);\n      setNickName(url?.nickName);\n    }\n  };\n  useEffect(() => {\n    getAvatar();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [owner]);\n  useEffect(() => {\n    setFollow(props.data.likes);\n  }, [props.data]);\n\n  const dispatchNftItem = async (payload) => {\n    await dispatch({ type: \"SET_SELECTED\", payload });\n  };\n\n  return (\n    <div className=\"nftCard bleuFrosted\" onClick={() => history.push(`/item/${id}`)}>\n      <div className=\"nftCardImageWrapper\">\n        {type === \"image\" ? (\n          <img src={image} className=\"nftCardImage\" />\n        ) : type === \"audio\" ? (\n          <img src=\"/assets/img/posts/1.jpg\" className=\"nftCardImage\" />\n        ) : null}\n      </div>\n      <div className=\"nftCardContent\">\n        <div className=\"nftCardTitle mb-1\">{name}</div>\n        <div className=\"nftCardCollection mb-2\">{nickName}</div>\n        <div className=\"nftCardPillPriceWrapper \">\n          <div className=\"text-right\">\n            <img\n              src=\"https://i.ibb.co/qMsBFtL/Binance-Logo.png\"\n              className=\"nftCardPillCurrencyImage mr-2\"\n            />\n            <strong>{price} BNB</strong>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n"]},"metadata":{},"sourceType":"module"}