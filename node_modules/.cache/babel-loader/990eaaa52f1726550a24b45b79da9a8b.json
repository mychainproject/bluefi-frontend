{"ast":null,"code":"var _jsxFileName = \"/home/hp/Desktop/Bluefi/bluefi-frontend/src/pages/Asset/Tabs/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { isAddress } from \"@ethersproject/address\";\nimport { firestore } from \"../../../firebase\";\nimport { NFT_MARKET_ADDRESS, DefaultAvatar } from \"../../../constants\";\nimport Market_INFO from \"artifacts/contracts/Marketplace.sol/FlokinomicsNFTMarketplace.json\";\nimport { toast } from \"react-toastify\";\nimport SweetAlert from \"sweetalert-react\";\nimport \"sweetalert/dist/sweetalert.css\";\nimport { parseUnits } from \"@ethersproject/units\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Tabs(props) {\n  _s();\n\n  const {\n    account,\n    library\n  } = useWeb3React();\n  const {\n    historyData,\n    bidsData,\n    item,\n    docId\n  } = props; // eslint-disable-next-line no-unused-vars\n\n  const [toAddress, setToAddress] = useState(\"\");\n  const [isShow, setIsShow] = useState(false);\n  const [isTransferring, setIsTransfer] = useState(false);\n  const [isBurning, setIsBurning] = useState(false);\n  const history = useHistory();\n\n  const getStr = type => {\n    if (type === 0) return \"Created \";\n    if (type === 1) return \"Buy \";\n    if (type === 2) return \"Bid placed \";\n    if (type === 3) return \"Auction created \";\n    if (type === 4) return \"Auction ended \";\n    if (type === 5) return \"Auction canceled \";\n  };\n\n  const burnNFT = () => {\n    setIsShow(true);\n  };\n\n  const onConfirmBurn = async () => {\n    const {\n      tokenId\n    } = item;\n    const contract = new Contract(NFT_MARKET_ADDRESS, Market_INFO.abi, library.getSigner());\n    setIsShow(false);\n    setIsBurning(true);\n    const res = await contract.burn(tokenId);\n    res.wait().then(async result => {\n      await firestore.collection(\"nfts\").doc(docId).delete();\n      toast.success(\"The NFT has been burnt out successfuly.\");\n      setIsBurning(false);\n      history.push(\"/explore\");\n    }).catch(err => {\n      toast.error(\"Failed to burn.\");\n      setIsBurning(false);\n    });\n  };\n\n  const sendNFT = async () => {\n    const {\n      tokenId\n    } = item;\n\n    if (toAddress === \"\" || !isAddress(toAddress)) {\n      toast.error(\"Please provide a valid address.\");\n      return;\n    }\n\n    if (tokenId === \"\") {\n      toast.error(\"Invalid token ID.\");\n      return;\n    }\n\n    setIsTransfer(true);\n\n    try {\n      const contract = new Contract(NFT_MARKET_ADDRESS, Market_INFO.abi, library.getSigner());\n      const res = await contract.giveaway(toAddress, item.tokenId, parseUnits(item.price.toString()), item.paymentType, item.royalties, item.tokenURI);\n      res.wait().then(async result => {\n        firestore.collection(\"users\").where(\"account\", \"==\", toAddress).get().then(async querySnapshot => {\n          let avatar;\n\n          if (!querySnapshot.empty) {\n            const user = querySnapshot.docs[0].data(); // rest of your code\n\n            avatar = user.avatar;\n          } else {\n            avatar = DefaultAvatar;\n          }\n\n          await firestore.collection(\"nfts\").doc(docId).update({\n            owner: toAddress,\n            ownerAvatar: avatar\n          });\n          toast.success(\"The NFT has been transferred successfuly.\");\n          setIsTransfer(false);\n          history.push(\"/explore\");\n        }).catch(function (error) {\n          toast.error(\"Failed to send transfer\");\n          setIsTransfer(false);\n        });\n      });\n    } catch (e) {\n      setIsTransfer(false);\n      console.log(e);\n    }\n  }; // const updateSetting = async () => {\n  // try {\n  //   if (item.isSale && saleType !== item.saleType) {\n  //     toast.error(\"Please stop selling first\");\n  //     return;\n  //   }\n  //   if (!account) {\n  //     toast.error(\"Please connect your wallet first.\");\n  //     return;\n  //   }\n  //   if (item.tokenId !== 0) {\n  //     const contract = new Contract(\n  //       NFT_MARKET_ADDRESS,\n  //       Market_INFO.abi,\n  //       library.getSigner()\n  //     );\n  //     const res = await contract.updatePrice(\n  //       item.tokenId,\n  //       parseUnits(newPrice.toString())\n  //     );\n  //     await res.wait();\n  //   }\n  //   await firestore\n  //     .collection(\"nfts\")\n  //     .doc(item.id)\n  //     .update({\n  //       price: parseFloat(newPrice),\n  //       saleType: saleType,\n  //     });\n  //   toast.success(\"Success to update.\");\n  // } catch (err) {\n  //   toast.error(\"Fail to update\");\n  // }\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"nav nav-tabs asset__tabs\",\n      role: \"tablist\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"nav-link active\",\n          \"data-toggle\": \"tab\",\n          href: \"#tab-1\",\n          role: \"tab\",\n          \"aria-controls\": \"tab-1\",\n          \"aria-selected\": \"true\",\n          children: \"History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"nav-link\",\n          \"data-toggle\": \"tab\",\n          href: \"#tab-2\",\n          role: \"tab\",\n          \"aria-controls\": \"tab-2\",\n          \"aria-selected\": \"false\",\n          children: \"Bids\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"nav-link\",\n          \"data-toggle\": \"tab\",\n          href: \"#tab-3\",\n          role: \"tab\",\n          \"aria-controls\": \"tab-3\",\n          \"aria-selected\": \"false\",\n          children: \"Actions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade show active\",\n        id: \"tab-1\",\n        role: \"tabpanel\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"asset__actions fancy-scrollbar\",\n          children: historyData.map((data, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `asset__action ${data.verified === true ? \"asset__action--verified\" : \"\"}`,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: data.avatar,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [getStr(data.actionType), \" for\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [data.kcsPrice, \" \", item.paymentType]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), \" \", data.timeAgo, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 34\n              }, this), \"by \", data.nickName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)]\n          }, `history-${index}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade\",\n        id: \"tab-2\",\n        role: \"tabpanel\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"asset__actions fancy-scrollbar\",\n          children: bidsData.map((data, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `asset__action ${data.verified === true ? \"asset__action--verified\" : \"\"}`,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: data.avatar,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [getStr(data.actionType), \" for\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [data.kcsPrice, \" \", item.paymentType]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), \" \", data.timeAgo, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 34\n              }, this), \"by \", data.nickName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this)]\n          }, `history-${index}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade\",\n        id: \"tab-3\",\n        role: \"tabpanel\",\n        children: item.owner === account && item.saleType === \"fix\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"asset__actions fancy-scrollbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"asset__action row\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"asset__text col-4 pr-0\",\n              children: \"Transfer To:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"toAddress\",\n              type: \"text\",\n              name: \"toAddress\",\n              className: \"sign__input col-8 height-sm\",\n              placeholder: \"ex: 0x600bE5FcB9338BC3938e4790EFBeAaa4F77D6893.\",\n              value: toAddress || \"\",\n              onChange: e => {\n                setToAddress(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"asset__btn asset__btn--clr height-sm\",\n              onClick: sendNFT,\n              children: isTransferring ? \"TRANSFERRING...\" : \"TRANSFER NFT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"asset__action row\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"asset__text col-4 pr-0\",\n              children: \"Or Burn:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"asset__actions\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"asset__btn asset__btn--red height-sm\",\n                onClick: burnNFT,\n                children: isBurning ? \"DELETING...\" : \"DELETE NFT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"asset__actions asset__action\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mx-auto asset__text\",\n            children: item.owner !== account ? \"You are not owner.\" : \"You cannot take any actions with this Auctioning NFT.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SweetAlert, {\n      show: isShow,\n      title: \"Are you sure?\",\n      text: \"Do you want to delete it permanantly?\",\n      showCancelButton: true,\n      onConfirm: onConfirmBurn,\n      onCancel: () => {\n        setIsShow(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Tabs, \"T6+xmRoNH8LzidlGoT1iIRGFwfk=\", false, function () {\n  return [useWeb3React, useHistory];\n});\n\n_c = Tabs;\nexport default Tabs;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tabs\");","map":{"version":3,"sources":["/home/hp/Desktop/Bluefi/bluefi-frontend/src/pages/Asset/Tabs/index.js"],"names":["React","useState","useHistory","useWeb3React","Contract","isAddress","firestore","NFT_MARKET_ADDRESS","DefaultAvatar","Market_INFO","toast","SweetAlert","parseUnits","Tabs","props","account","library","historyData","bidsData","item","docId","toAddress","setToAddress","isShow","setIsShow","isTransferring","setIsTransfer","isBurning","setIsBurning","history","getStr","type","burnNFT","onConfirmBurn","tokenId","contract","abi","getSigner","res","burn","wait","then","result","collection","doc","delete","success","push","catch","err","error","sendNFT","giveaway","price","toString","paymentType","royalties","tokenURI","where","get","querySnapshot","avatar","empty","user","docs","data","update","owner","ownerAvatar","e","console","log","map","index","verified","actionType","kcsPrice","timeAgo","nickName","saleType","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { isAddress } from \"@ethersproject/address\";\nimport { firestore } from \"../../../firebase\";\nimport { NFT_MARKET_ADDRESS, DefaultAvatar } from \"../../../constants\";\nimport Market_INFO from \"artifacts/contracts/Marketplace.sol/FlokinomicsNFTMarketplace.json\";\n\nimport { toast } from \"react-toastify\";\n\nimport SweetAlert from \"sweetalert-react\";\nimport \"sweetalert/dist/sweetalert.css\";\nimport { parseUnits } from \"@ethersproject/units\";\n\nfunction Tabs(props) {\n  const { account, library } = useWeb3React();\n  const { historyData, bidsData, item, docId } = props;\n  // eslint-disable-next-line no-unused-vars\n  const [toAddress, setToAddress] = useState(\"\");\n  const [isShow, setIsShow] = useState(false);\n  const [isTransferring, setIsTransfer] = useState(false);\n  const [isBurning, setIsBurning] = useState(false);\n  const history = useHistory();\n  const getStr = (type) => {\n    if (type === 0) return \"Created \";\n    if (type === 1) return \"Buy \";\n    if (type === 2) return \"Bid placed \";\n    if (type === 3) return \"Auction created \";\n    if (type === 4) return \"Auction ended \";\n    if (type === 5) return \"Auction canceled \";\n  };\n  const burnNFT = () => {\n    setIsShow(true);\n  };\n  const onConfirmBurn = async () => {\n    const { tokenId } = item;\n\n    const contract = new Contract(\n      NFT_MARKET_ADDRESS,\n      Market_INFO.abi,\n      library.getSigner()\n    );\n    setIsShow(false);\n    setIsBurning(true);\n    const res = await contract.burn(tokenId);\n    res\n      .wait()\n      .then(async (result) => {\n        await firestore.collection(\"nfts\").doc(docId).delete();\n        toast.success(\"The NFT has been burnt out successfuly.\");\n        setIsBurning(false);\n        history.push(\"/explore\");\n      })\n      .catch((err) => {\n        toast.error(\"Failed to burn.\");\n        setIsBurning(false);\n      });\n  };\n  const sendNFT = async () => {\n    const { tokenId } = item;\n\n    if (toAddress === \"\" || !isAddress(toAddress)) {\n      toast.error(\"Please provide a valid address.\");\n      return;\n    }\n\n    if (tokenId === \"\") {\n      toast.error(\"Invalid token ID.\");\n      return;\n    }\n    setIsTransfer(true);\n\n    try {\n      const contract = new Contract(\n        NFT_MARKET_ADDRESS,\n        Market_INFO.abi,\n        library.getSigner()\n      );\n      const res = await contract.giveaway(\n        toAddress,\n        item.tokenId,\n        parseUnits(item.price.toString()),\n        item.paymentType,\n        item.royalties,\n        item.tokenURI\n      );\n      res.wait().then(async (result) => {\n        firestore\n          .collection(\"users\")\n          .where(\"account\", \"==\", toAddress)\n          .get()\n          .then(async (querySnapshot) => {\n            let avatar;\n            if (!querySnapshot.empty) {\n              const user = querySnapshot.docs[0].data();\n              // rest of your code\n              avatar = user.avatar;\n            } else {\n              avatar = DefaultAvatar;\n            }\n            await firestore.collection(\"nfts\").doc(docId).update({\n              owner: toAddress,\n              ownerAvatar: avatar,\n            });\n            toast.success(\"The NFT has been transferred successfuly.\");\n            setIsTransfer(false);\n\n            history.push(\"/explore\");\n          })\n          .catch(function (error) {\n            toast.error(\"Failed to send transfer\");\n            setIsTransfer(false);\n          });\n      });\n    } catch (e) {\n      setIsTransfer(false);\n      console.log(e);\n    }\n  };\n\n  // const updateSetting = async () => {\n  // try {\n  //   if (item.isSale && saleType !== item.saleType) {\n  //     toast.error(\"Please stop selling first\");\n  //     return;\n  //   }\n  //   if (!account) {\n  //     toast.error(\"Please connect your wallet first.\");\n  //     return;\n  //   }\n  //   if (item.tokenId !== 0) {\n  //     const contract = new Contract(\n  //       NFT_MARKET_ADDRESS,\n  //       Market_INFO.abi,\n  //       library.getSigner()\n  //     );\n  //     const res = await contract.updatePrice(\n  //       item.tokenId,\n  //       parseUnits(newPrice.toString())\n  //     );\n  //     await res.wait();\n  //   }\n  //   await firestore\n  //     .collection(\"nfts\")\n  //     .doc(item.id)\n  //     .update({\n  //       price: parseFloat(newPrice),\n  //       saleType: saleType,\n  //     });\n  //   toast.success(\"Success to update.\");\n  // } catch (err) {\n  //   toast.error(\"Fail to update\");\n  // }\n  // };\n  return (\n    <>\n      <ul className=\"nav nav-tabs asset__tabs\" role=\"tablist\">\n        <li className=\"nav-item\">\n          <a\n            className=\"nav-link active\"\n            data-toggle=\"tab\"\n            href=\"#tab-1\"\n            role=\"tab\"\n            aria-controls=\"tab-1\"\n            aria-selected=\"true\"\n          >\n            History\n          </a>\n        </li>\n\n        <li className=\"nav-item\">\n          <a\n            className=\"nav-link\"\n            data-toggle=\"tab\"\n            href=\"#tab-2\"\n            role=\"tab\"\n            aria-controls=\"tab-2\"\n            aria-selected=\"false\"\n          >\n            Bids\n          </a>\n        </li>\n\n        <li className=\"nav-item\">\n          <a\n            className=\"nav-link\"\n            data-toggle=\"tab\"\n            href=\"#tab-3\"\n            role=\"tab\"\n            aria-controls=\"tab-3\"\n            aria-selected=\"false\"\n          >\n            Actions\n          </a>\n        </li>\n      </ul>\n\n      <div className=\"tab-content\">\n        <div className=\"tab-pane fade show active\" id=\"tab-1\" role=\"tabpanel\">\n          <div className=\"asset__actions fancy-scrollbar\">\n            {historyData.map((data, index) => (\n              <div\n                className={`asset__action ${\n                  data.verified === true ? \"asset__action--verified\" : \"\"\n                }`}\n                key={`history-${index}`}\n              >\n                <img src={data.avatar} alt=\"\" />\n                <p>\n                  {getStr(data.actionType)} for{\" \"}\n                  <b>\n                    {data.kcsPrice} {item.paymentType}\n                  </b>{\" \"}\n                  {data.timeAgo} <br />\n                  by {data.nickName}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"tab-pane fade\" id=\"tab-2\" role=\"tabpanel\">\n          <div className=\"asset__actions fancy-scrollbar\">\n            {bidsData.map((data, index) => (\n              <div\n                className={`asset__action ${\n                  data.verified === true ? \"asset__action--verified\" : \"\"\n                }`}\n                key={`history-${index}`}\n              >\n                <img src={data.avatar} alt=\"\" />\n                <p>\n                  {getStr(data.actionType)} for{\" \"}\n                  <b>\n                    {data.kcsPrice} {item.paymentType}\n                  </b>{\" \"}\n                  {data.timeAgo} <br />\n                  by {data.nickName}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"tab-pane fade\" id=\"tab-3\" role=\"tabpanel\">\n          {item.owner === account && item.saleType === \"fix\" ? (\n            <div className=\"asset__actions fancy-scrollbar\">\n              <div className=\"asset__action row\">\n                <p className=\"asset__text col-4 pr-0\">Transfer To:</p>\n                <input\n                  id=\"toAddress\"\n                  type=\"text\"\n                  name=\"toAddress\"\n                  className=\"sign__input col-8 height-sm\"\n                  placeholder=\"ex: 0x600bE5FcB9338BC3938e4790EFBeAaa4F77D6893.\"\n                  value={toAddress || \"\"}\n                  onChange={(e) => {\n                    setToAddress(e.target.value);\n                  }}\n                />\n              </div>\n              <div className=\"d-flex justify-center\">\n                <button\n                  className=\"asset__btn asset__btn--clr height-sm\"\n                  onClick={sendNFT}\n                >\n                  {isTransferring ? \"TRANSFERRING...\" : \"TRANSFER NFT\"}\n                </button>\n              </div>\n              <div className=\"asset__action row\">\n                <p className=\"asset__text col-4 pr-0\">Or Burn:</p>\n              </div>\n              <div className=\"asset__actions\">\n                <div className=\"d-flex justify-center\">\n                  <button\n                    className=\"asset__btn asset__btn--red height-sm\"\n                    onClick={burnNFT}\n                  >\n                    {isBurning ? \"DELETING...\" : \"DELETE NFT\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"asset__actions asset__action\">\n              <p className=\"mx-auto asset__text\">\n                {item.owner !== account\n                  ? \"You are not owner.\"\n                  : \"You cannot take any actions with this Auctioning NFT.\"}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n      <SweetAlert\n        show={isShow}\n        title=\"Are you sure?\"\n        text=\"Do you want to delete it permanantly?\"\n        showCancelButton\n        onConfirm={onConfirmBurn}\n        onCancel={() => {\n          setIsShow(false);\n        }}\n      />\n    </>\n  );\n}\nexport default Tabs;\n"]},"metadata":{},"sourceType":"module"}