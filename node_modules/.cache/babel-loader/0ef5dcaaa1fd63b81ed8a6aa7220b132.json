{"ast":null,"code":"var _jsxFileName = \"/home/hp/Desktop/Bluefi/bleufi-frontend/src/pages/Create/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport NFTDropzone from \"../../components/Dropzone\";\nimport Switch from \"react-switch\";\nimport { firestore } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { NFTStorage } from \"nft.storage\";\nimport { NFTStorageKey } from \"../../constants/index\";\nimport ipfs from \"utils/ipfsApi.js\";\nimport \"styles/create.css\";\nimport moment from \"moment\";\nimport ReactSlider from \"react-slider\";\nimport { parseUnits } from \"@ethersproject/units\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { NFT_ADDRESS, NFT_MARKET_ADDRESS, PaymentList } from \"../../constants\";\nimport Market_INFO from \"artifacts/contracts/Marketplace.sol/FlokinomicsNFTMarketplace.json\";\nimport NFT_INFO from \"artifacts/contracts/FlokinomicsNFT.sol/FlokinomicsNFT.json\";\nimport { algolia } from \"../../utils/algolia\";\nimport bluefiabi from \"../../services/smart-contract/BLEUFINFT\";\nimport Web3 from \"web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst client = new NFTStorage({\n  token: NFTStorageKey\n});\n\nfunction Create() {\n  _s();\n\n  const web3 = new Web3(Web3.givenProvider || window.etherum);\n  const newContract = \"0xA20B92E0a08B6c32E81958A4955F138589C2084a\";\n  const abiFile = bluefiabi.abi;\n  const contractInstance = new web3.eth.Contract(abiFile, newContract);\n  console.log(contractInstance.methods);\n  const {\n    library,\n    account\n  } = useWeb3React();\n  const [user, setUser] = useState({\n    account: account,\n    avatar: \"assets/img/avatars/avatar.jpg\",\n    ownerAvatar: \"assets/img/avatars/avatar.jpg\",\n    imageCover: \"/assets/img/bg/bg.png\",\n    firstName: \"User\",\n    lastName: \"\",\n    nickName: \"@user\",\n    bio: \"\",\n    twitter: \"\",\n    telegram: \"\",\n    instagram: \"\",\n    subscribe: \"\",\n    followers: []\n  });\n  const [type, setType] = useState(\"image\"); // eslint-disable-next-line no-unused-vars\n\n  const [file, setFile] = useState(null);\n  const [category, setCategory] = useState(\"art\");\n  const [name, setName] = useState(\"\");\n  const [royalties, setRoyalties] = useState(7);\n  const [description, setDescription] = useState(\"\");\n  const [price, setPrice] = useState(0);\n  const [saleType, setSaleType] = useState(\"fix\");\n  const [buffer, setBuffer] = useState(null);\n  const [attachBuffer, setAttachBuffer] = useState(null);\n  const [isCreateProcess, setCreateProcess] = useState(false);\n  const [isSale, setIsSale] = useState(false);\n  const [auctionLength, setAuctionLength] = useState(\"Auction Length\");\n  const [paymentType, setPaymentType] = useState(\"BNB\");\n  const [signatureNFT, setSignatureNFT] = useState();\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const getFile = function (file) {\n    let isAttach = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const reader = new FileReader();\n\n    reader.onabort = () => console.log(\"file reading was aborted\");\n\n    reader.onerror = () => console.log(\"file reading has failed\");\n\n    reader.onload = () => {\n      // Do whatever you want with the file contents\n      const binaryStr = reader.result;\n      if (!isAttach) setBuffer(binaryStr);else setAttachBuffer(binaryStr);\n    };\n\n    reader.readAsArrayBuffer(file);\n  };\n\n  const createNFT = async () => {\n    if (!name || !description || !buffer) {\n      toast.error(\"Please fill the NFT information.\");\n      return;\n    }\n\n    if (isSale && price <= 0) {\n      toast.error(\"Price should not be zero.\");\n      return;\n    }\n\n    try {\n      if (!account) toast.error(\"Please connect your wallet first.\");\n      const userExist = (await firestore.collection(\"users\").doc(account).get()).exists;\n\n      if (!userExist) {\n        // await creatProfile(account);\n        toast.error(\"Please create your profile first.\");\n        return;\n      }\n\n      if (!isSale || isSale && saleType === \"fix\") {\n        // await library\n        //     .getSigner(account)\n        //     .signMessage(\"Please check this account is yours\");\n        let accounts = await web3.eth.getAccounts();\n        const hash = await contractInstance.methods.getMessageHash(1, 0, tokenURI).call();\n        const encodedhash = await contractInstance.methods.getEthSignedMessageHash(hash).call();\n        const signature = await web3.eth.sign(encodedhash, accounts[0]);\n        setSignatureNFT(signature);\n        console.log(signature);\n      }\n\n      if (account) {\n        setCreateProcess(true);\n        const result = await ipfs.files.add(Buffer.from(buffer));\n        const cid = await client.storeDirectory([new File([JSON.stringify({\n          name: name,\n          description: description,\n          creator: account,\n          type,\n          category,\n          royalties: royalties,\n          image: `https://ipfs.io/ipfs/${result[0].hash}`\n        })], \"metadata.json\")]);\n\n        if (cid) {\n          const tokenURI = `https://ipfs.io/ipfs/${cid}/metadata.json`;\n\n          if (isSale && saleType === \"auction\") {\n            const contract = new Contract(NFT_MARKET_ADDRESS, Market_INFO.abi, library.getSigner());\n            const nftContract = new Contract(NFT_ADDRESS, NFT_INFO.abi, library.getSigner());\n            const auction_length = parseInt(auctionLength) * 3600; // const auction_length = 1200;\n\n            const isApproved = await nftContract.isApprovedForAll(account, NFT_MARKET_ADDRESS);\n\n            if (!isApproved) {\n              const approve = await nftContract.setApprovalForAll(NFT_MARKET_ADDRESS, true);\n              await approve.wait();\n            } // const res = await contract.createAuction(\n            //     0,\n            //     true,\n            //     tokenURI,\n            //     auction_length,\n            //     parseUnits(price.toString()),\n            //     paymentType,\n            //     account\n            // );\n            // res\n            //     .wait()\n            //     .then(async (result) => {\n            //         const events = result?.events;\n            //         if (events.length > 0) {\n            //             const args = events[events.length - 1].args;\n            //             const ress = await firestore.collection(\"nfts\").add({\n            //                 tokenId: parseInt(args.tokenId),\n            //                 tokenURI,\n            //                 ownerAvatar:\n            //                     user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n            //                 owner: account,\n            //                 creator: account,\n            //                 price: parseFloat(price),\n            //                 isSale,\n            //                 saleType: \"auction\",\n            //                 paymentType: paymentType,\n            //                 auctionLength: auction_length,\n            //                 auctionCreator: account,\n            //                 time:\n            //                     (parseInt(args.duration) + parseInt(args.auctionStart)) *\n            //                     1000,\n            //                 likes: [],\n            //                 created: moment().valueOf(),\n            //             });\n            //             if (ress?.id) {\n            //                 algolia.saveObject({\n            //                     objectID: ress?.id,\n            //                     id: ress?.id,\n            //                     tokenId: parseInt(args.tokenId),\n            //                     tokenURI,\n            //                     ownerAvatar:\n            //                         user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n            //                     owner: account,\n            //                     creator: account,\n            //                     price: parseFloat(price),\n            //                     isSale,\n            //                     saleType: \"auction\",\n            //                     paymentType: paymentType,\n            //                     auctionLength: auction_length,\n            //                     auctionCreator: account,\n            //                     time:\n            //                         (parseInt(args.duration) +\n            //                             parseInt(args.auctionStart)) *\n            //                         1000,\n            //                     likes: [],\n            //                     created: moment().valueOf(),\n            //                 });\n            //                 firestore.collection(\"history\").add({\n            //                     userId: account,\n            //                     oldUserId: account,\n            //                     nftId: ress.id,\n            //                     actionType: 0,\n            //                     price: parseFloat(price),\n            //                     paymentType: paymentType,\n            //                     time: moment().valueOf(),\n            //                 });\n            //                 firestore.collection(\"history\").add({\n            //                     userId: account,\n            //                     oldUserId: account,\n            //                     nftId: ress.id,\n            //                     actionType: 3,\n            //                     price: parseFloat(price),\n            //                     paymentType: paymentType,\n            //                     time: moment().valueOf(),\n            //                 });\n            //                 toast.success(\"Create NFT and start auction\");\n            //                 setCreateProcess(false);\n            //                 history.push(`/creator/${account}`);\n            //             } else {\n            //                 setCreateProcess(false);\n            //                 toast.error(\"Create failed.\");\n            //             }\n            //         }\n            //     })\n            //     .catch((err) => {\n            //         toast.error(\"Create failed.\");\n            //     });\n\n          } else {\n            const res = await firestore.collection(\"nfts\").add({\n              tokenId: 0,\n              tokenURI,\n              ownerAvatar: (user === null || user === void 0 ? void 0 : user.avatar) || \"/assets/img/avatars/avatar.jpg\",\n              owner: account,\n              creator: account,\n              price: parseFloat(price),\n              paymentType: paymentType,\n              isSale,\n              saleType: \"fix\",\n              auctionLength: 0,\n              auctionCreator: null,\n              time: 0,\n              likes: [],\n              created: moment().valueOf(),\n              type,\n              category,\n              name,\n              description,\n              signatureNFT\n            });\n\n            if (res === null || res === void 0 ? void 0 : res.id) {\n              algolia.saveObject({\n                objectID: res === null || res === void 0 ? void 0 : res.id,\n                id: res === null || res === void 0 ? void 0 : res.id,\n                tokenId: 0,\n                tokenURI,\n                ownerAvatar: (user === null || user === void 0 ? void 0 : user.avatar) || \"/assets/img/avatars/avatar.jpg\",\n                owner: account,\n                creator: account,\n                price: parseFloat(price),\n                paymentType: paymentType,\n                isSale,\n                saleType: \"fix\",\n                auctionLength: 0,\n                auctionCreator: null,\n                time: 0,\n                likes: [],\n                created: moment().valueOf(),\n                type,\n                category,\n                name,\n                description\n              });\n              firestore.collection(\"history\").add({\n                userId: account,\n                oldUserId: account,\n                nftId: res.id,\n                actionType: 0,\n                price: parseFloat(price),\n                paymentType: paymentType,\n                time: moment().valueOf()\n              });\n              toast.success(\"Create NFT\");\n              setCreateProcess(false);\n              history.push(`/creator/${account}`);\n            } else {\n              setCreateProcess(false);\n              toast.error(\"Create failed.\");\n            }\n          }\n        } else {\n          toast.error(\"Uploading failed\");\n          setCreateProcess(false);\n        }\n      }\n    } catch (err) {\n      setCreateProcess(false);\n      console.log(err);\n    }\n  };\n\n  const dispatchUser = async user_id => {\n    if (user_id) {\n      const userInfo = (await firestore.collection(\"users\").doc(user_id).get()).data();\n      dispatch({\n        type: \"SET_PROFILE\",\n        userInfo\n      });\n      setUser(userInfo);\n    }\n  };\n\n  useEffect(() => {\n    dispatchUser(account); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [account]);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"buyFlokin\",\n    style: {\n      paddingTop: 90\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-6 pr-1 createPart\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            class: \"createStepLabel\",\n            children: \"Upload file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 25\n          }, this), type === \"audio\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nftdropzone\",\n            children: /*#__PURE__*/_jsxDEV(NFTDropzone, {\n              nftType: \"Audio\",\n              onChange: newfile => {\n                setFile(newfile);\n                getFile(newfile);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 29\n          }, this) : type === \"video\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nftdropzone\",\n            children: /*#__PURE__*/_jsxDEV(NFTDropzone, {\n              nftType: \"Video\",\n              onChange: newfile => {\n                setFile(newfile);\n                getFile(newfile);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 29\n          }, this) : type === \"image\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nftdropzone\",\n            children: /*#__PURE__*/_jsxDEV(NFTDropzone, {\n              nftType: \"image\",\n              onChange: newfile => {\n                setFile(newfile);\n                getFile(newfile);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 29\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"createStepLabel mb-20\",\n              children: \"NFT Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"type\",\n              name: \"type\",\n              className: \"sign__select inputBg\",\n              onChange: e => setType(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image\",\n                children: \"NFT Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image\",\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"audio\",\n                children: \"Audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"video\",\n                children: \"Video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"category\",\n              name: \"category\",\n              className: \"sign__select\",\n              value: category,\n              onChange: e => setCategory(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"art\",\n                children: \"Art\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"music\",\n                children: \"Music\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"film\",\n                children: \"Film\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"sports\",\n                children: \"Sports\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"education\",\n                children: \"Education\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"photography\",\n                children: \"Photography\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"games\",\n                children: \"Games\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"other\",\n                children: \"Other\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"type\",\n              name: \"type\",\n              className: \"sign__select inputBg\",\n              onChange: e => setType(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image\",\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"audio\",\n                children: \"Audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"video\",\n                children: \"Video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-6  pr-1 createPart\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"createStepLabel\",\n            children: \"Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"name\",\n              type: \"text\",\n              name: \"name\",\n              className: \"sign__input \",\n              placeholder: \"Title\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              style: {\n                border: '1px solid #FFFFFF33'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"description\",\n              name: \"description\",\n              className: \"sign__textarea\",\n              placeholder: \"Description\",\n              value: description,\n              onChange: e => setDescription(e.target.value),\n              style: {\n                border: '1px solid #FFFFFF33'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"mt-50\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"createStepLabel\",\n              children: \"Sale & Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"sign__label mr-3\",\n              htmlFor: \"sale\",\n              children: \"List for Sale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Switch, {\n              onChange: () => {\n                setIsSale(!isSale);\n              },\n              checked: isSale,\n              height: 26,\n              class: \"createListSwitch\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"sign__label\",\n              htmlFor: \"royalties\",\n              children: \"Royalties\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"royaltyBtn\",\n              children: [royalties, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ReactSlider, {\n              className: \"horizontal-slider\",\n              thumbClassName: \"example-thumb\",\n              trackClassName: \"example-track\",\n              defaultValue: 7,\n              value: royalties,\n              onChange: e => {\n                setRoyalties(e);\n              },\n              min: 1,\n              max: 20,\n              renderTrack: (props, state) => /*#__PURE__*/_jsxDEV(\"div\", { ...props,\n                children: state.valueNow\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 37\n              }, this) //custom track\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 25\n          }, this), isSale && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"saleType\",\n              name: \"saleType\",\n              className: \"sign__select \",\n              value: saleType,\n              onChange: e => setSaleType(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Sale Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"fix\",\n                children: \"Fixed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"auction\",\n                children: \"Auction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sign__group\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"price\",\n                type: \"number\",\n                value: price,\n                onChange: e => setPrice(e.target.value),\n                name: \"price\",\n                className: \"sign__input\",\n                placeholder: \"BNB Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 33\n            }, this), saleType === \"auction\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sign__group\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"length\",\n                name: \"length\",\n                className: \"sign__select mt-0\",\n                value: auctionLength,\n                onChange: e => setAuctionLength(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Auction Length\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1\",\n                  children: \"1 hour\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"12\",\n                  children: \"12 hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"24\",\n                  children: \"24 hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"72\",\n                  children: \"3 days\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"168\",\n                  children: \"7 days\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 text-center mb-100\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-glow btn-hover-shine\",\n          onClick: createNFT,\n          disabled: isCreateProcess,\n          children: isCreateProcess ? \"Creating...\" : \"Create NFT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 337,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Create, \"97g4Mq/oFkpscJc3Wro7e8vqFWQ=\", false, function () {\n  return [useWeb3React, useHistory, useDispatch];\n});\n\n_c = Create;\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["/home/hp/Desktop/Bluefi/bleufi-frontend/src/pages/Create/index.js"],"names":["React","useEffect","useState","useDispatch","useHistory","useWeb3React","NFTDropzone","Switch","firestore","toast","NFTStorage","NFTStorageKey","ipfs","moment","ReactSlider","parseUnits","Contract","NFT_ADDRESS","NFT_MARKET_ADDRESS","PaymentList","Market_INFO","NFT_INFO","algolia","bluefiabi","Web3","client","token","Create","web3","givenProvider","window","etherum","newContract","abiFile","abi","contractInstance","eth","console","log","methods","library","account","user","setUser","avatar","ownerAvatar","imageCover","firstName","lastName","nickName","bio","twitter","telegram","instagram","subscribe","followers","type","setType","file","setFile","category","setCategory","name","setName","royalties","setRoyalties","description","setDescription","price","setPrice","saleType","setSaleType","buffer","setBuffer","attachBuffer","setAttachBuffer","isCreateProcess","setCreateProcess","isSale","setIsSale","auctionLength","setAuctionLength","paymentType","setPaymentType","signatureNFT","setSignatureNFT","history","dispatch","getFile","isAttach","reader","FileReader","onabort","onerror","onload","binaryStr","result","readAsArrayBuffer","createNFT","error","userExist","collection","doc","get","exists","accounts","getAccounts","hash","getMessageHash","tokenURI","call","encodedhash","getEthSignedMessageHash","signature","sign","files","add","Buffer","from","cid","storeDirectory","File","JSON","stringify","creator","image","contract","getSigner","nftContract","auction_length","parseInt","isApproved","isApprovedForAll","approve","setApprovalForAll","wait","res","tokenId","owner","parseFloat","auctionCreator","time","likes","created","valueOf","id","saveObject","objectID","userId","oldUserId","nftId","actionType","success","push","err","dispatchUser","user_id","userInfo","data","paddingTop","newfile","e","target","value","border","props","state","valueNow"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport NFTDropzone from \"../../components/Dropzone\";\nimport Switch from \"react-switch\";\nimport { firestore } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { NFTStorage } from \"nft.storage\";\nimport { NFTStorageKey } from \"../../constants/index\";\nimport ipfs from \"utils/ipfsApi.js\";\nimport \"styles/create.css\";\nimport moment from \"moment\";\nimport ReactSlider from \"react-slider\";\nimport { parseUnits } from \"@ethersproject/units\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { NFT_ADDRESS, NFT_MARKET_ADDRESS, PaymentList } from \"../../constants\";\nimport Market_INFO from \"artifacts/contracts/Marketplace.sol/FlokinomicsNFTMarketplace.json\";\nimport NFT_INFO from \"artifacts/contracts/FlokinomicsNFT.sol/FlokinomicsNFT.json\";\nimport { algolia } from \"../../utils/algolia\";\nimport bluefiabi from \"../../services/smart-contract/BLEUFINFT\"\nimport Web3 from \"web3\"\n\nconst client = new NFTStorage({ token: NFTStorageKey });\n\nfunction Create() {\n\n    const web3 = new Web3(Web3.givenProvider || window.etherum)\n    const newContract = \"0xA20B92E0a08B6c32E81958A4955F138589C2084a\"\n    const abiFile = bluefiabi.abi\n    const contractInstance = new web3.eth.Contract(abiFile, newContract)\n    console.log(contractInstance.methods)\n\n    const { library, account } = useWeb3React();\n    const [user, setUser] = useState({\n        account: account,\n        avatar: \"assets/img/avatars/avatar.jpg\",\n        ownerAvatar: \"assets/img/avatars/avatar.jpg\",\n        imageCover: \"/assets/img/bg/bg.png\",\n        firstName: \"User\",\n        lastName: \"\",\n        nickName: \"@user\",\n        bio: \"\",\n        twitter: \"\",\n        telegram: \"\",\n        instagram: \"\",\n        subscribe: \"\",\n        followers: [],\n    });\n    const [type, setType] = useState(\"image\");\n    // eslint-disable-next-line no-unused-vars\n    const [file, setFile] = useState(null);\n    const [category, setCategory] = useState(\"art\");\n    const [name, setName] = useState(\"\");\n    const [royalties, setRoyalties] = useState(7);\n    const [description, setDescription] = useState(\"\");\n    const [price, setPrice] = useState(0);\n    const [saleType, setSaleType] = useState(\"fix\");\n    const [buffer, setBuffer] = useState(null);\n    const [attachBuffer, setAttachBuffer] = useState(null);\n    const [isCreateProcess, setCreateProcess] = useState(false);\n    const [isSale, setIsSale] = useState(false);\n    const [auctionLength, setAuctionLength] = useState(\"Auction Length\");\n    const [paymentType, setPaymentType] = useState(\"BNB\");\n    const [signatureNFT, setSignatureNFT] = useState();\n\n    const history = useHistory();\n    const dispatch = useDispatch();\n\n    const getFile = (file, isAttach = false) => {\n        const reader = new FileReader();\n        reader.onabort = () => console.log(\"file reading was aborted\");\n        reader.onerror = () => console.log(\"file reading has failed\");\n        reader.onload = () => {\n            // Do whatever you want with the file contents\n            const binaryStr = reader.result;\n            if (!isAttach) setBuffer(binaryStr);\n            else setAttachBuffer(binaryStr);\n        };\n        reader.readAsArrayBuffer(file);\n    };\n\n    const createNFT = async () => {\n        if (!name || !description || !buffer) {\n            toast.error(\"Please fill the NFT information.\");\n            return;\n        }\n        if (isSale && price <= 0) {\n            toast.error(\"Price should not be zero.\");\n            return;\n        }\n        try {\n            if (!account) toast.error(\"Please connect your wallet first.\");\n            const userExist = (await firestore.collection(\"users\").doc(account).get())\n                .exists;\n            if (!userExist) {\n                // await creatProfile(account);\n                toast.error(\"Please create your profile first.\");\n                return;\n            }\n            if (!isSale || (isSale && saleType === \"fix\")){\n                // await library\n                //     .getSigner(account)\n                //     .signMessage(\"Please check this account is yours\");\n                let accounts = await web3.eth.getAccounts()\n            const hash = await contractInstance.methods.getMessageHash(\n                1,\n                0,\n                tokenURI\n            ).call()\n            const encodedhash = await contractInstance.methods.getEthSignedMessageHash(hash).call()\n            const signature = await web3.eth.sign(encodedhash, accounts[0])\n            setSignatureNFT(signature)\n            console.log(signature)\n            }\n            if (account) {\n                setCreateProcess(true);\n                const result = await ipfs.files.add(Buffer.from(buffer));\n                const cid = await client.storeDirectory([\n                    new File(\n                        [\n                            JSON.stringify({\n                                name: name,\n                                description: description,\n                                creator: account,\n                                type,\n                                category,\n                                royalties: royalties,\n                                image: `https://ipfs.io/ipfs/${result[0].hash}`,\n                            }),\n                        ],\n                        \"metadata.json\"\n                    ),\n                ]);\n                if (cid) {\n                    const tokenURI = `https://ipfs.io/ipfs/${cid}/metadata.json`;\n                    if (isSale && saleType === \"auction\") {\n                        const contract = new Contract(\n                            NFT_MARKET_ADDRESS,\n                            Market_INFO.abi,\n                            library.getSigner()\n                        );\n                        const nftContract = new Contract(\n                            NFT_ADDRESS,\n                            NFT_INFO.abi,\n                            library.getSigner()\n                        );\n                        const auction_length = parseInt(auctionLength) * 3600;\n                        // const auction_length = 1200;\n                        const isApproved = await nftContract.isApprovedForAll(\n                            account,\n                            NFT_MARKET_ADDRESS\n                        );\n                        if (!isApproved) {\n                            const approve = await nftContract.setApprovalForAll(\n                                NFT_MARKET_ADDRESS,\n                                true\n                            );\n                            await approve.wait();\n                        }\n                        // const res = await contract.createAuction(\n                        //     0,\n                        //     true,\n                        //     tokenURI,\n                        //     auction_length,\n                        //     parseUnits(price.toString()),\n                        //     paymentType,\n                        //     account\n                        // );\n                        // res\n                        //     .wait()\n                        //     .then(async (result) => {\n                        //         const events = result?.events;\n                        //         if (events.length > 0) {\n                        //             const args = events[events.length - 1].args;\n                        //             const ress = await firestore.collection(\"nfts\").add({\n                        //                 tokenId: parseInt(args.tokenId),\n                        //                 tokenURI,\n                        //                 ownerAvatar:\n                        //                     user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                        //                 owner: account,\n                        //                 creator: account,\n                        //                 price: parseFloat(price),\n                        //                 isSale,\n                        //                 saleType: \"auction\",\n                        //                 paymentType: paymentType,\n                        //                 auctionLength: auction_length,\n                        //                 auctionCreator: account,\n                        //                 time:\n                        //                     (parseInt(args.duration) + parseInt(args.auctionStart)) *\n                        //                     1000,\n                        //                 likes: [],\n                        //                 created: moment().valueOf(),\n                        //             });\n                        //             if (ress?.id) {\n                        //                 algolia.saveObject({\n                        //                     objectID: ress?.id,\n                        //                     id: ress?.id,\n                        //                     tokenId: parseInt(args.tokenId),\n                        //                     tokenURI,\n                        //                     ownerAvatar:\n                        //                         user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                        //                     owner: account,\n                        //                     creator: account,\n                        //                     price: parseFloat(price),\n                        //                     isSale,\n                        //                     saleType: \"auction\",\n                        //                     paymentType: paymentType,\n                        //                     auctionLength: auction_length,\n                        //                     auctionCreator: account,\n                        //                     time:\n                        //                         (parseInt(args.duration) +\n                        //                             parseInt(args.auctionStart)) *\n                        //                         1000,\n                        //                     likes: [],\n                        //                     created: moment().valueOf(),\n                        //                 });\n                        //                 firestore.collection(\"history\").add({\n                        //                     userId: account,\n                        //                     oldUserId: account,\n                        //                     nftId: ress.id,\n                        //                     actionType: 0,\n                        //                     price: parseFloat(price),\n                        //                     paymentType: paymentType,\n                        //                     time: moment().valueOf(),\n                        //                 });\n                        //                 firestore.collection(\"history\").add({\n                        //                     userId: account,\n                        //                     oldUserId: account,\n                        //                     nftId: ress.id,\n                        //                     actionType: 3,\n                        //                     price: parseFloat(price),\n                        //                     paymentType: paymentType,\n                        //                     time: moment().valueOf(),\n                        //                 });\n                        //                 toast.success(\"Create NFT and start auction\");\n                        //                 setCreateProcess(false);\n                        //                 history.push(`/creator/${account}`);\n                        //             } else {\n                        //                 setCreateProcess(false);\n                        //                 toast.error(\"Create failed.\");\n                        //             }\n                        //         }\n                        //     })\n                        //     .catch((err) => {\n                        //         toast.error(\"Create failed.\");\n                        //     });\n                    } else {\n\n\n                        const res = await firestore.collection(\"nfts\").add({\n                            tokenId: 0,\n                            tokenURI,\n                            ownerAvatar: user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                            owner: account,\n                            creator: account,\n                            price: parseFloat(price),\n                            paymentType: paymentType,\n                            isSale,\n                            saleType: \"fix\",\n                            auctionLength: 0,\n                            auctionCreator: null,\n                            time: 0,\n                            likes: [],\n                            created: moment().valueOf(),\n                            type,\n                            category,\n                            name,\n                            description,\n                            signatureNFT\n                        });\n                        if (res?.id) {\n                            algolia.saveObject({\n                                objectID: res?.id,\n                                id: res?.id,\n                                tokenId: 0,\n                                tokenURI,\n                                ownerAvatar: user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                                owner: account,\n                                creator: account,\n                                price: parseFloat(price),\n                                paymentType: paymentType,\n                                isSale,\n                                saleType: \"fix\",\n                                auctionLength: 0,\n                                auctionCreator: null,\n                                time: 0,\n                                likes: [],\n                                created: moment().valueOf(),\n                                type,\n                                category,\n                                name,\n                                description,\n                            });\n                            firestore.collection(\"history\").add({\n                                userId: account,\n                                oldUserId: account,\n                                nftId: res.id,\n                                actionType: 0,\n                                price: parseFloat(price),\n                                paymentType: paymentType,\n                                time: moment().valueOf(),\n                            });\n                            toast.success(\"Create NFT\");\n                            setCreateProcess(false);\n                            history.push(`/creator/${account}`);\n                        } else {\n                            setCreateProcess(false);\n                            toast.error(\"Create failed.\");\n                        }\n                    }\n                } else {\n                    toast.error(\"Uploading failed\");\n                    setCreateProcess(false);\n                }\n            }\n        } catch (err) {\n            setCreateProcess(false);\n            console.log(err);\n        }\n    };\n\n    const dispatchUser = async (user_id) => {\n        if (user_id) {\n            const userInfo = (\n                await firestore.collection(\"users\").doc(user_id).get()\n            ).data();\n            dispatch({ type: \"SET_PROFILE\", userInfo });\n            setUser(userInfo);\n        }\n    };\n    useEffect(() => {\n        dispatchUser(account);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [account]);\n    return (\n        <main className=\"buyFlokin\" style={{ paddingTop: 90 }}>\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-lg-6 pr-1 createPart\">\n\n                        <h2 class=\"createStepLabel\">Upload file</h2>\n                        {type === \"audio\" ? (\n                            <div className=\"nftdropzone\">\n                                <NFTDropzone\n                                    nftType=\"Audio\"\n                                    onChange={(newfile) => {\n                                        setFile(newfile);\n                                        getFile(newfile);\n                                    }}\n                                />\n                            </div>\n                        ) : type === \"video\" ? (\n                            <div className=\"nftdropzone\">\n                                <NFTDropzone\n                                    nftType=\"Video\"\n                                    onChange={(newfile) => {\n                                        setFile(newfile);\n                                        getFile(newfile);\n                                    }}\n                                />\n                            </div>\n                        ) : type === \"image\" ? (\n                            <div className=\"nftdropzone\">\n                                <NFTDropzone\n                                    nftType=\"image\"\n                                    onChange={(newfile) => {\n                                        setFile(newfile);\n                                        getFile(newfile);\n                                    }}\n                                />\n                            </div>\n                        ) : (\n                            \"\"\n                        )}\n\n                        <div className=\"sign__group\">\n                            <h2 className=\"createStepLabel mb-20\">NFT Type</h2>\n                            <select\n                                id=\"type\"\n                                name=\"type\"\n                                className=\"sign__select inputBg\"\n                                onChange={(e) => setType(e.target.value)}\n                            >\n                                <option value=\"image\">NFT Type</option>\n                                <option value=\"image\">Image</option>\n                                <option value=\"audio\">Audio</option>\n                                <option value=\"video\">Video</option>\n                            </select>\n                        </div>\n\n                        <div className=\"sign__group\">\n                            <select\n                                id=\"category\"\n                                name=\"category\"\n                                className=\"sign__select\"\n                                value={category}\n                                onChange={(e) => setCategory(e.target.value)}\n                            >\n                                <option>Category</option>\n                                <option value=\"art\">Art</option>\n                                <option value=\"music\">Music</option>\n                                <option value=\"film\">Film</option>\n                                <option value=\"sports\">Sports</option>\n                                <option value=\"education\">Education</option>\n                                <option value=\"photography\">Photography</option>\n                                <option value=\"games\">Games</option>\n                                <option value=\"other\">Other</option>\n                            </select>\n                        </div>\n\n                        <div className=\"sign__group\">\n                            <select\n                                id=\"type\"\n                                name=\"type\"\n                                className=\"sign__select inputBg\"\n                                onChange={(e) => setType(e.target.value)}\n                            >\n                                <option value=\"image\">Image</option>\n                                <option value=\"audio\">Audio</option>\n                                <option value=\"video\">Video</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"col-12 col-lg-6  pr-1 createPart\">\n                        <h2 className=\"createStepLabel\">Information</h2>\n                        <div className=\"sign__group\">\n                            <input\n                                id=\"name\"\n                                type=\"text\"\n                                name=\"name\"\n                                className=\"sign__input \"\n                                placeholder=\"Title\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                style={{ border: '1px solid #FFFFFF33' }}\n                            />\n                        </div>\n\n                        <div className=\"sign__group\">\n                            <textarea\n                                id=\"description\"\n                                name=\"description\"\n                                className=\"sign__textarea\"\n                                placeholder=\"Description\"\n                                value={description}\n                                onChange={(e) => setDescription(e.target.value)}\n                                style={{ border: '1px solid #FFFFFF33' }}\n                            ></textarea>\n                        </div>\n                        <div class=\"mt-50\">\n                            <h2 className=\"createStepLabel\">Sale & Price</h2>\n                        </div>\n                        <div className=\"sign__group\">\n                            <label className=\"sign__label mr-3\" htmlFor=\"sale\">\n                                List for Sale\n                            </label>\n                            <Switch\n                                onChange={() => {\n                                    setIsSale(!isSale);\n                                }}\n                                checked={isSale}\n                                height={26}\n                                class=\"createListSwitch\"\n                            />\n                        </div>\n\n                        <div className=\"sign__group\">\n                            <label className=\"sign__label\" htmlFor=\"royalties\">\n                                Royalties\n                            </label>\n                            <button className=\"royaltyBtn\">{royalties}%</button>\n                            <ReactSlider\n                                className=\"horizontal-slider\"\n                                thumbClassName=\"example-thumb\"\n                                trackClassName=\"example-track\"\n                                defaultValue={7}\n                                value={royalties}\n                                onChange={(e) => {\n                                    setRoyalties(e);\n                                }}\n                                min={1}\n                                max={20}\n                                renderTrack={(props, state) => (\n                                    <div {...props}>{state.valueNow}</div>\n                                )} //custom track\n                            />\n                        </div>\n\n                        {isSale && (\n                            <div className=\"sign__group\">\n\n                                <select\n                                    id=\"saleType\"\n                                    name=\"saleType\"\n                                    className=\"sign__select \"\n                                    value={saleType}\n                                    onChange={(e) => setSaleType(e.target.value)}\n                                >\n                                    <option>Sale Type</option>\n                                    <option value=\"fix\">Fixed</option>\n                                    <option value=\"auction\">Auction</option>\n                                </select>\n\n                                <div className=\"sign__group\">\n                                    <input\n                                        id=\"price\"\n                                        type=\"number\"\n                                        value={price}\n                                        onChange={(e) => setPrice(e.target.value)}\n                                        name=\"price\"\n                                        className=\"sign__input\"\n                                        placeholder=\"BNB Price\"\n                                    />\n                                </div>\n                                {saleType === \"auction\" && (\n                                    <div className=\"sign__group\">\n                                        <select\n                                            id=\"length\"\n                                            name=\"length\"\n                                            className=\"sign__select mt-0\"\n                                            value={auctionLength}\n                                            onChange={(e) => setAuctionLength(e.target.value)}\n                                        >\n                                            <option>Auction Length</option>\n                                            <option value=\"1\">1 hour</option>\n                                            <option value=\"12\">12 hours</option>\n                                            <option value=\"24\">24 hours</option>\n                                            <option value=\"72\">3 days</option>\n                                            <option value=\"168\">7 days</option>\n                                        </select>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                    </div>\n                </div>\n                <div className=\"col-12 text-center mb-100\">\n                    <button\n                        type=\"button\"\n                        className=\"btn-glow btn-hover-shine\"\n                        onClick={createNFT}\n                        disabled={isCreateProcess}\n                    >\n                        {isCreateProcess ? \"Creating...\" : \"Create NFT\"}\n                    </button>\n                </div>\n            </div>\n\n\n        </main>\n    )\n        ;\n}\n\nexport default Create;"]},"metadata":{},"sourceType":"module"}