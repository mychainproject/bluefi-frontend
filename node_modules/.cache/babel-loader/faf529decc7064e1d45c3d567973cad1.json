{"ast":null,"code":"var _jsxFileName = \"/home/hp/Desktop/Bluefi/bluefi-frontend/src/pages/Create/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport NFTDropzone from \"../../components/Dropzone\";\nimport Switch from \"react-switch\";\nimport { firestore } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { NFTStorage } from \"nft.storage\";\nimport { NFTStorageKey } from \"../../constants/index\";\nimport ipfs from \"utils/ipfsApi.js\";\nimport \"styles/create.css\";\nimport moment from \"moment\";\nimport ReactSlider from \"react-slider\";\nimport { parseUnits } from \"@ethersproject/units\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { NFT_ADDRESS, NFT_MARKET_ADDRESS, PaymentList } from \"../../constants\";\nimport Market_INFO from \"artifacts/contracts/Marketplace.sol/FlokinomicsNFTMarketplace.json\";\nimport NFT_INFO from \"artifacts/contracts/FlokinomicsNFT.sol/FlokinomicsNFT.json\";\nimport { algolia } from \"../../utils/algolia\";\nimport bluefiabi from \"../../services/smart-contract/BLEUFINFT\";\nimport Web3 from \"web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst client = new NFTStorage({\n  token: NFTStorageKey\n});\n\nfunction Create() {\n  _s();\n\n  const web3 = new Web3(Web3.givenProvider || window.etherum);\n  const newContract = \"0xA20B92E0a08B6c32E81958A4955F138589C2084a\";\n  const abiFile = bluefiabi.abi;\n  const contractInstance = new web3.eth.Contract(abiFile, newContract);\n  const {\n    library,\n    account\n  } = useWeb3React();\n  const [user, setUser] = useState({\n    account: account,\n    avatar: \"assets/img/avatars/avatar.jpg\",\n    ownerAvatar: \"assets/img/avatars/avatar.jpg\",\n    imageCover: \"/assets/img/bg/bg.png\",\n    firstName: \"User\",\n    lastName: \"\",\n    nickName: \"@user\",\n    bio: \"\",\n    twitter: \"\",\n    telegram: \"\",\n    instagram: \"\",\n    subscribe: \"\",\n    followers: []\n  });\n  const [type, setType] = useState(\"image\"); // eslint-disable-next-line no-unused-vars\n\n  const [file, setFile] = useState(null);\n  const [category, setCategory] = useState(\"art\");\n  const [name, setName] = useState(\"\");\n  const [royalties, setRoyalties] = useState(7);\n  const [description, setDescription] = useState(\"\");\n  const [price, setPrice] = useState(0);\n  const [saleType, setSaleType] = useState(\"fix\");\n  const [buffer, setBuffer] = useState(null);\n  const [attachBuffer, setAttachBuffer] = useState(null);\n  const [isCreateProcess, setCreateProcess] = useState(false);\n  const [isSale, setIsSale] = useState(false);\n  const [auctionLength, setAuctionLength] = useState(\"Auction Length\");\n  const [paymentType, setPaymentType] = useState(\"BNB\");\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const getFile = function (file) {\n    let isAttach = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const reader = new FileReader();\n\n    reader.onabort = () => console.log(\"file reading was aborted\");\n\n    reader.onerror = () => console.log(\"file reading has failed\");\n\n    reader.onload = () => {\n      // Do whatever you want with the file contents\n      const binaryStr = reader.result;\n      if (!isAttach) setBuffer(binaryStr);else setAttachBuffer(binaryStr);\n    };\n\n    reader.readAsArrayBuffer(file);\n  };\n\n  const createNFT = async () => {\n    if (!name || !description || !buffer) {\n      toast.error(\"Please fill the NFT information.\");\n      return;\n    }\n\n    if (isSale && price <= 0) {\n      toast.error(\"Price should not be zero.\");\n      return;\n    }\n\n    try {\n      if (!account) toast.error(\"Please connect your wallet first.\");\n      const userExist = (await firestore.collection(\"users\").doc(account).get()).exists;\n\n      if (!userExist) {\n        // await creatProfile(account);\n        toast.error(\"Please create your profile first.\");\n        return;\n      } // if (!isSale || (isSale && saleType === \"fix\"))\n      // await library\n      //     .getSigner(account)\n      //     .signMessage(\"Please check this account is yours\");\n\n\n      if (account) {\n        setCreateProcess(true);\n        const result = await ipfs.files.add(Buffer.from(buffer));\n        const cid = await client.storeDirectory([new File([JSON.stringify({\n          name: name,\n          description: description,\n          creator: account,\n          type,\n          category,\n          royalties: royalties,\n          image: `https://ipfs.io/ipfs/${result[0].hash}`\n        })], \"metadata.json\")]);\n\n        if (cid) {\n          const tokenURI = `https://ipfs.io/ipfs/${cid}/metadata.json`;\n\n          if (isSale && saleType === \"auction\") {\n            const contract = new Contract(NFT_MARKET_ADDRESS, Market_INFO.abi, library.getSigner());\n            const nftContract = new Contract(NFT_ADDRESS, NFT_INFO.abi, library.getSigner());\n            const auction_length = parseInt(auctionLength) * 3600; // const auction_length = 1200;\n\n            const isApproved = await nftContract.isApprovedForAll(account, NFT_MARKET_ADDRESS);\n\n            if (!isApproved) {\n              const approve = await nftContract.setApprovalForAll(NFT_MARKET_ADDRESS, true);\n              await approve.wait();\n            } // const res = await contract.createAuction(\n            //     0,\n            //     true,\n            //     tokenURI,\n            //     auction_length,\n            //     parseUnits(price.toString()),\n            //     paymentType,\n            //     account\n            // );\n            // res\n            //     .wait()\n            //     .then(async (result) => {\n            //         const events = result?.events;\n            //         if (events.length > 0) {\n            //             const args = events[events.length - 1].args;\n            //             const ress = await firestore.collection(\"nfts\").add({\n            //                 tokenId: parseInt(args.tokenId),\n            //                 tokenURI,\n            //                 ownerAvatar:\n            //                     user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n            //                 owner: account,\n            //                 creator: account,\n            //                 price: parseFloat(price),\n            //                 isSale,\n            //                 saleType: \"auction\",\n            //                 paymentType: paymentType,\n            //                 auctionLength: auction_length,\n            //                 auctionCreator: account,\n            //                 time:\n            //                     (parseInt(args.duration) + parseInt(args.auctionStart)) *\n            //                     1000,\n            //                 likes: [],\n            //                 created: moment().valueOf(),\n            //             });\n            //             if (ress?.id) {\n            //                 algolia.saveObject({\n            //                     objectID: ress?.id,\n            //                     id: ress?.id,\n            //                     tokenId: parseInt(args.tokenId),\n            //                     tokenURI,\n            //                     ownerAvatar:\n            //                         user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n            //                     owner: account,\n            //                     creator: account,\n            //                     price: parseFloat(price),\n            //                     isSale,\n            //                     saleType: \"auction\",\n            //                     paymentType: paymentType,\n            //                     auctionLength: auction_length,\n            //                     auctionCreator: account,\n            //                     time:\n            //                         (parseInt(args.duration) +\n            //                             parseInt(args.auctionStart)) *\n            //                         1000,\n            //                     likes: [],\n            //                     created: moment().valueOf(),\n            //                 });\n            //                 firestore.collection(\"history\").add({\n            //                     userId: account,\n            //                     oldUserId: account,\n            //                     nftId: ress.id,\n            //                     actionType: 0,\n            //                     price: parseFloat(price),\n            //                     paymentType: paymentType,\n            //                     time: moment().valueOf(),\n            //                 });\n            //                 firestore.collection(\"history\").add({\n            //                     userId: account,\n            //                     oldUserId: account,\n            //                     nftId: ress.id,\n            //                     actionType: 3,\n            //                     price: parseFloat(price),\n            //                     paymentType: paymentType,\n            //                     time: moment().valueOf(),\n            //                 });\n            //                 toast.success(\"Create NFT and start auction\");\n            //                 setCreateProcess(false);\n            //                 history.push(`/creator/${account}`);\n            //             } else {\n            //                 setCreateProcess(false);\n            //                 toast.error(\"Create failed.\");\n            //             }\n            //         }\n            //     })\n            //     .catch((err) => {\n            //         toast.error(\"Create failed.\");\n            //     });\n\n          } else {\n            const resNonce = await firestore.collection(\"nonce\").get();\n            let variblelNonse = resNonce.docs[0].data().nonce; // const check = contractInstance.methods.mintedNonce(variblelNonse)\n            // if(check){\n            //     console.log(\"update nonce\")\n            // }\n\n            variblelNonse = variblelNonse + 1;\n            console.log(\"&&&&&&&&&&&&&&&&&\", variblelNonse);\n            await firestore.collection(\"nonce\").doc(resNonce.docs[0].id).update({\n              nonce: variblelNonse\n            });\n            let accounts = await web3.eth.getAccounts();\n            const hash = await contractInstance.methods.getMessageHash(1, 0, tokenURI).call();\n            const encodedhash = await contractInstance.methods.getEthSignedMessageHash(hash).call();\n            const signature = await web3.eth.sign(encodedhash, accounts[0]);\n            console.log(signature);\n            await firestore.collection(\"newNFTs\").add({\n              tokenId: 0,\n              tokenURI,\n              ownerAvatar: (user === null || user === void 0 ? void 0 : user.avatar) || \"/assets/img/avatars/avatar.jpg\",\n              owner: account,\n              creator: account,\n              price: parseFloat(price),\n              paymentType: paymentType,\n              isSale,\n              saleType: \"fix\",\n              auctionLength: 0,\n              auctionCreator: null,\n              time: 0,\n              likes: [],\n              created: moment().valueOf(),\n              type,\n              category,\n              name,\n              description,\n              signature,\n              nonce: variblelNonse,\n              royalties\n            });\n            const res = await firestore.collection(\"nfts\").add({\n              tokenId: 0,\n              tokenURI,\n              ownerAvatar: (user === null || user === void 0 ? void 0 : user.avatar) || \"/assets/img/avatars/avatar.jpg\",\n              owner: account,\n              creator: account,\n              price: parseFloat(price),\n              paymentType: paymentType,\n              isSale,\n              saleType: \"fix\",\n              auctionLength: 0,\n              auctionCreator: null,\n              time: 0,\n              likes: [],\n              created: moment().valueOf(),\n              type,\n              category,\n              name,\n              description,\n              signature,\n              nonce: variblelNonse,\n              royalties\n            });\n\n            if (res === null || res === void 0 ? void 0 : res.id) {\n              algolia.saveObject({\n                objectID: res === null || res === void 0 ? void 0 : res.id,\n                id: res === null || res === void 0 ? void 0 : res.id,\n                tokenId: 0,\n                tokenURI,\n                ownerAvatar: (user === null || user === void 0 ? void 0 : user.avatar) || \"/assets/img/avatars/avatar.jpg\",\n                owner: account,\n                creator: account,\n                price: parseFloat(price),\n                paymentType: paymentType,\n                isSale,\n                saleType: \"fix\",\n                auctionLength: 0,\n                auctionCreator: null,\n                time: 0,\n                likes: [],\n                created: moment().valueOf(),\n                type,\n                category,\n                name,\n                description\n              });\n              firestore.collection(\"history\").add({\n                userId: account,\n                oldUserId: account,\n                nftId: res.id,\n                actionType: 0,\n                price: parseFloat(price),\n                paymentType: paymentType,\n                time: moment().valueOf()\n              });\n              toast.success(\"Create NFT\");\n              setCreateProcess(false);\n              history.push(`/creator/${account}`);\n            } else {\n              setCreateProcess(false);\n              toast.error(\"Create failed.\");\n            }\n          }\n        } else {\n          toast.error(\"Uploading failed\");\n          setCreateProcess(false);\n        }\n      }\n    } catch (err) {\n      setCreateProcess(false);\n      console.log(err);\n    }\n  };\n\n  const dispatchUser = async user_id => {\n    if (user_id) {\n      const userInfo = (await firestore.collection(\"users\").doc(user_id).get()).data();\n      dispatch({\n        type: \"SET_PROFILE\",\n        userInfo\n      });\n      setUser(userInfo);\n    }\n  };\n\n  useEffect(() => {\n    dispatchUser(account); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [account]);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"buyFlokin\",\n    style: {\n      paddingTop: 90\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-6 pr-1 createPart\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            class: \"createStepLabel\",\n            children: \"Upload file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 25\n          }, this), type === \"audio\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nftdropzone\",\n            children: /*#__PURE__*/_jsxDEV(NFTDropzone, {\n              nftType: \"Audio\",\n              onChange: newfile => {\n                setFile(newfile);\n                getFile(newfile);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 29\n          }, this) : type === \"video\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nftdropzone\",\n            children: /*#__PURE__*/_jsxDEV(NFTDropzone, {\n              nftType: \"Video\",\n              onChange: newfile => {\n                setFile(newfile);\n                getFile(newfile);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 29\n          }, this) : type === \"image\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nftdropzone\",\n            children: /*#__PURE__*/_jsxDEV(NFTDropzone, {\n              nftType: \"image\",\n              onChange: newfile => {\n                setFile(newfile);\n                getFile(newfile);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 29\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"createStepLabel mb-20\",\n              children: \"NFT Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"type\",\n              name: \"type\",\n              className: \"sign__select inputBg\",\n              onChange: e => setType(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image\",\n                children: \"NFT Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image\",\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"audio\",\n                children: \"Audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"video\",\n                children: \"Video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"category\",\n              name: \"category\",\n              className: \"sign__select\",\n              value: category,\n              onChange: e => setCategory(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"art\",\n                children: \"Art\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"music\",\n                children: \"Music\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"film\",\n                children: \"Film\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"sports\",\n                children: \"Sports\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"education\",\n                children: \"Education\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"photography\",\n                children: \"Photography\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"games\",\n                children: \"Games\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"other\",\n                children: \"Other\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"type\",\n              name: \"type\",\n              className: \"sign__select inputBg\",\n              onChange: e => setType(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image\",\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"audio\",\n                children: \"Audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"video\",\n                children: \"Video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-lg-6  pr-1 createPart\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"createStepLabel\",\n            children: \"Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"name\",\n              type: \"text\",\n              name: \"name\",\n              className: \"sign__input \",\n              placeholder: \"Title\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              style: {\n                border: '1px solid #FFFFFF33'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"description\",\n              name: \"description\",\n              className: \"sign__textarea\",\n              placeholder: \"Description\",\n              value: description,\n              onChange: e => setDescription(e.target.value),\n              style: {\n                border: '1px solid #FFFFFF33'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"mt-50\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"createStepLabel\",\n              children: \"Sale & Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"sign__label mr-3\",\n              htmlFor: \"sale\",\n              children: \"List for Sale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Switch, {\n              onChange: () => {\n                setIsSale(!isSale);\n              },\n              checked: isSale,\n              height: 26,\n              class: \"createListSwitch\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"sign__label\",\n              htmlFor: \"royalties\",\n              children: \"Royalties\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"royaltyBtn\",\n              children: [royalties, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(ReactSlider, {\n              className: \"horizontal-slider\",\n              thumbClassName: \"example-thumb\",\n              trackClassName: \"example-track\",\n              defaultValue: 7,\n              value: royalties,\n              onChange: e => {\n                setRoyalties(e);\n              },\n              min: 1,\n              max: 20,\n              renderTrack: (props, state) => /*#__PURE__*/_jsxDEV(\"div\", { ...props,\n                children: state.valueNow\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 29\n              }, this) //custom track\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 17\n          }, this), isSale && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign__group\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"saleType\",\n              name: \"saleType\",\n              className: \"sign__select \",\n              value: saleType,\n              onChange: e => setSaleType(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Sale Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"fix\",\n                children: \"Fixed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"auction\",\n                children: \"Auction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sign__group\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"price\",\n                type: \"number\",\n                value: price,\n                onChange: e => setPrice(e.target.value),\n                name: \"price\",\n                className: \"sign__input\",\n                placeholder: \"BNB Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 25\n            }, this), saleType === \"auction\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sign__group\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"length\",\n                name: \"length\",\n                className: \"sign__select mt-0\",\n                value: auctionLength,\n                onChange: e => setAuctionLength(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Auction Length\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1\",\n                  children: \"1 hour\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"12\",\n                  children: \"12 hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"24\",\n                  children: \"24 hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"72\",\n                  children: \"3 days\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"168\",\n                  children: \"7 days\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 text-center mb-100\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-glow btn-hover-shine\",\n          onClick: createNFT,\n          disabled: isCreateProcess,\n          children: isCreateProcess ? \"Creating...\" : \"Create NFT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 373,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Create, \"orS6FfkRbyMI8FjBS/FJbPjIa14=\", false, function () {\n  return [useWeb3React, useHistory, useDispatch];\n});\n\n_c = Create;\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["/home/hp/Desktop/Bluefi/bluefi-frontend/src/pages/Create/index.js"],"names":["React","useEffect","useState","useDispatch","useHistory","useWeb3React","NFTDropzone","Switch","firestore","toast","NFTStorage","NFTStorageKey","ipfs","moment","ReactSlider","parseUnits","Contract","NFT_ADDRESS","NFT_MARKET_ADDRESS","PaymentList","Market_INFO","NFT_INFO","algolia","bluefiabi","Web3","client","token","Create","web3","givenProvider","window","etherum","newContract","abiFile","abi","contractInstance","eth","library","account","user","setUser","avatar","ownerAvatar","imageCover","firstName","lastName","nickName","bio","twitter","telegram","instagram","subscribe","followers","type","setType","file","setFile","category","setCategory","name","setName","royalties","setRoyalties","description","setDescription","price","setPrice","saleType","setSaleType","buffer","setBuffer","attachBuffer","setAttachBuffer","isCreateProcess","setCreateProcess","isSale","setIsSale","auctionLength","setAuctionLength","paymentType","setPaymentType","history","dispatch","getFile","isAttach","reader","FileReader","onabort","console","log","onerror","onload","binaryStr","result","readAsArrayBuffer","createNFT","error","userExist","collection","doc","get","exists","files","add","Buffer","from","cid","storeDirectory","File","JSON","stringify","creator","image","hash","tokenURI","contract","getSigner","nftContract","auction_length","parseInt","isApproved","isApprovedForAll","approve","setApprovalForAll","wait","resNonce","variblelNonse","docs","data","nonce","id","update","accounts","getAccounts","methods","getMessageHash","call","encodedhash","getEthSignedMessageHash","signature","sign","tokenId","owner","parseFloat","auctionCreator","time","likes","created","valueOf","res","saveObject","objectID","userId","oldUserId","nftId","actionType","success","push","err","dispatchUser","user_id","userInfo","paddingTop","newfile","e","target","value","border","props","state","valueNow"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport {useHistory} from \"react-router-dom\";\nimport {useWeb3React} from \"@web3-react/core\";\nimport NFTDropzone from \"../../components/Dropzone\";\nimport Switch from \"react-switch\";\nimport {firestore} from \"../../firebase\";\nimport {toast} from \"react-toastify\";\nimport {NFTStorage} from \"nft.storage\";\nimport {NFTStorageKey} from \"../../constants/index\";\nimport ipfs from \"utils/ipfsApi.js\";\nimport \"styles/create.css\";\nimport moment from \"moment\";\nimport ReactSlider from \"react-slider\";\nimport {parseUnits} from \"@ethersproject/units\";\nimport {Contract} from \"@ethersproject/contracts\";\nimport {NFT_ADDRESS, NFT_MARKET_ADDRESS, PaymentList} from \"../../constants\";\nimport Market_INFO from \"artifacts/contracts/Marketplace.sol/FlokinomicsNFTMarketplace.json\";\nimport NFT_INFO from \"artifacts/contracts/FlokinomicsNFT.sol/FlokinomicsNFT.json\";\nimport {algolia} from \"../../utils/algolia\";\nimport bluefiabi from \"../../services/smart-contract/BLEUFINFT\"\nimport Web3 from \"web3\"\n\nconst client = new NFTStorage({token: NFTStorageKey});\n\nfunction Create() {\n\n    const web3 = new Web3(Web3.givenProvider || window.etherum)\n    const newContract = \"0xA20B92E0a08B6c32E81958A4955F138589C2084a\"\n    const abiFile = bluefiabi.abi\n    const contractInstance = new web3.eth.Contract(abiFile,newContract)\n\n    const {library, account} = useWeb3React();\n    const [user, setUser] = useState({\n        account: account,\n        avatar: \"assets/img/avatars/avatar.jpg\",\n        ownerAvatar: \"assets/img/avatars/avatar.jpg\",\n        imageCover: \"/assets/img/bg/bg.png\",\n        firstName: \"User\",\n        lastName: \"\",\n        nickName: \"@user\",\n        bio: \"\",\n        twitter: \"\",\n        telegram: \"\",\n        instagram: \"\",\n        subscribe: \"\",\n        followers: [],\n    });\n    const [type, setType] = useState(\"image\");\n    // eslint-disable-next-line no-unused-vars\n    const [file, setFile] = useState(null);\n    const [category, setCategory] = useState(\"art\");\n    const [name, setName] = useState(\"\");\n    const [royalties, setRoyalties] = useState(7);\n    const [description, setDescription] = useState(\"\");\n    const [price, setPrice] = useState(0);\n    const [saleType, setSaleType] = useState(\"fix\");\n    const [buffer, setBuffer] = useState(null);\n    const [attachBuffer, setAttachBuffer] = useState(null);\n    const [isCreateProcess, setCreateProcess] = useState(false);\n    const [isSale, setIsSale] = useState(false);\n    const [auctionLength, setAuctionLength] = useState(\"Auction Length\");\n    const [paymentType, setPaymentType] = useState(\"BNB\");\n\n    const history = useHistory();\n    const dispatch = useDispatch();\n    \n\n    const getFile = (file, isAttach = false) => {\n        const reader = new FileReader();\n        reader.onabort = () => console.log(\"file reading was aborted\");\n        reader.onerror = () => console.log(\"file reading has failed\");\n        reader.onload = () => {\n            // Do whatever you want with the file contents\n            const binaryStr = reader.result;\n            if (!isAttach) setBuffer(binaryStr);\n            else setAttachBuffer(binaryStr);\n        };\n        reader.readAsArrayBuffer(file);\n    };\n\n    const createNFT = async () => {\n        if (!name || !description || !buffer) {\n            toast.error(\"Please fill the NFT information.\");\n            return;\n        }\n        if (isSale && price <= 0) {\n            toast.error(\"Price should not be zero.\");\n            return;\n        }\n        try {\n            if (!account) toast.error(\"Please connect your wallet first.\");\n            const userExist = (await firestore.collection(\"users\").doc(account).get())\n                .exists;\n            if (!userExist) {\n                // await creatProfile(account);\n                toast.error(\"Please create your profile first.\");\n                return;\n            }\n            // if (!isSale || (isSale && saleType === \"fix\"))\n                // await library\n                //     .getSigner(account)\n                //     .signMessage(\"Please check this account is yours\");\n            if (account) {\n                setCreateProcess(true);\n                const result = await ipfs.files.add(Buffer.from(buffer));\n                const cid = await client.storeDirectory([\n                    new File(\n                        [\n                            JSON.stringify({\n                                name: name,\n                                description: description,\n                                creator: account,\n                                type,\n                                category,\n                                royalties: royalties,\n                                image: `https://ipfs.io/ipfs/${result[0].hash}`,\n                            }),\n                        ],\n                        \"metadata.json\"\n                    ),\n                ]);\n                if (cid) {\n                    const tokenURI = `https://ipfs.io/ipfs/${cid}/metadata.json`;\n                    if (isSale && saleType === \"auction\") {\n                        const contract = new Contract(\n                            NFT_MARKET_ADDRESS,\n                            Market_INFO.abi,\n                            library.getSigner()\n                        );\n                        const nftContract = new Contract(\n                            NFT_ADDRESS,\n                            NFT_INFO.abi,\n                            library.getSigner()\n                        );\n                        const auction_length = parseInt(auctionLength) * 3600;\n                        // const auction_length = 1200;\n                        const isApproved = await nftContract.isApprovedForAll(\n                            account,\n                            NFT_MARKET_ADDRESS\n                        );\n                        if (!isApproved) {\n                            const approve = await nftContract.setApprovalForAll(\n                                NFT_MARKET_ADDRESS,\n                                true\n                            );\n                            await approve.wait();\n                        }\n                        // const res = await contract.createAuction(\n                        //     0,\n                        //     true,\n                        //     tokenURI,\n                        //     auction_length,\n                        //     parseUnits(price.toString()),\n                        //     paymentType,\n                        //     account\n                        // );\n                        // res\n                        //     .wait()\n                        //     .then(async (result) => {\n                        //         const events = result?.events;\n                        //         if (events.length > 0) {\n                        //             const args = events[events.length - 1].args;\n                        //             const ress = await firestore.collection(\"nfts\").add({\n                        //                 tokenId: parseInt(args.tokenId),\n                        //                 tokenURI,\n                        //                 ownerAvatar:\n                        //                     user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                        //                 owner: account,\n                        //                 creator: account,\n                        //                 price: parseFloat(price),\n                        //                 isSale,\n                        //                 saleType: \"auction\",\n                        //                 paymentType: paymentType,\n                        //                 auctionLength: auction_length,\n                        //                 auctionCreator: account,\n                        //                 time:\n                        //                     (parseInt(args.duration) + parseInt(args.auctionStart)) *\n                        //                     1000,\n                        //                 likes: [],\n                        //                 created: moment().valueOf(),\n                        //             });\n                        //             if (ress?.id) {\n                        //                 algolia.saveObject({\n                        //                     objectID: ress?.id,\n                        //                     id: ress?.id,\n                        //                     tokenId: parseInt(args.tokenId),\n                        //                     tokenURI,\n                        //                     ownerAvatar:\n                        //                         user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                        //                     owner: account,\n                        //                     creator: account,\n                        //                     price: parseFloat(price),\n                        //                     isSale,\n                        //                     saleType: \"auction\",\n                        //                     paymentType: paymentType,\n                        //                     auctionLength: auction_length,\n                        //                     auctionCreator: account,\n                        //                     time:\n                        //                         (parseInt(args.duration) +\n                        //                             parseInt(args.auctionStart)) *\n                        //                         1000,\n                        //                     likes: [],\n                        //                     created: moment().valueOf(),\n                        //                 });\n                        //                 firestore.collection(\"history\").add({\n                        //                     userId: account,\n                        //                     oldUserId: account,\n                        //                     nftId: ress.id,\n                        //                     actionType: 0,\n                        //                     price: parseFloat(price),\n                        //                     paymentType: paymentType,\n                        //                     time: moment().valueOf(),\n                        //                 });\n                        //                 firestore.collection(\"history\").add({\n                        //                     userId: account,\n                        //                     oldUserId: account,\n                        //                     nftId: ress.id,\n                        //                     actionType: 3,\n                        //                     price: parseFloat(price),\n                        //                     paymentType: paymentType,\n                        //                     time: moment().valueOf(),\n                        //                 });\n                        //                 toast.success(\"Create NFT and start auction\");\n                        //                 setCreateProcess(false);\n                        //                 history.push(`/creator/${account}`);\n                        //             } else {\n                        //                 setCreateProcess(false);\n                        //                 toast.error(\"Create failed.\");\n                        //             }\n                        //         }\n                        //     })\n                        //     .catch((err) => {\n                        //         toast.error(\"Create failed.\");\n                      \n                        //     });\n                    } else {\n                       \n                            const resNonce = await firestore.collection(\"nonce\").get();\n                            let variblelNonse = resNonce.docs[0].data().nonce;\n                            // const check = contractInstance.methods.mintedNonce(variblelNonse)\n                            // if(check){\n                            //     console.log(\"update nonce\")\n                            // }\n                            variblelNonse= variblelNonse + 1\n\n                            console.log(\"&&&&&&&&&&&&&&&&&\",variblelNonse)\n                            \n                            await firestore.collection(\"nonce\").doc(resNonce.docs[0].id).update({\n                                nonce: variblelNonse})\n                            let accounts = await web3.eth.getAccounts()\n                            const hash = await contractInstance.methods.getMessageHash(\n                              1,\n                              0,\n                              tokenURI  \n                            ).call()\n                            const encodedhash = await contractInstance.methods.getEthSignedMessageHash(hash).call()\n                            const signature = await web3.eth.sign(encodedhash, accounts[0])\n                            console.log(signature)\n\n                        await firestore.collection(\"newNFTs\").add({\n                            tokenId: 0,\n                            tokenURI,\n                            ownerAvatar: user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                            owner: account,\n                            creator: account,\n                            price: parseFloat(price),\n                            paymentType: paymentType,\n                            isSale,\n                            saleType: \"fix\",\n                            auctionLength: 0,\n                            auctionCreator: null,\n                            time: 0,\n                            likes: [],\n                            created: moment().valueOf(),\n                            type,\n                            category,\n                            name,\n                            description,\n                            signature,\n                            nonce:variblelNonse,\n                            royalties\n                        });\n                        const res = await firestore.collection(\"nfts\").add({\n                            tokenId: 0,\n                            tokenURI,\n                            ownerAvatar: user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                            owner: account,\n                            creator: account,\n                            price: parseFloat(price),\n                            paymentType: paymentType,\n                            isSale,\n                            saleType: \"fix\",\n                            auctionLength: 0,\n                            auctionCreator: null,\n                            time: 0,\n                            likes: [],\n                            created: moment().valueOf(),\n                            type,\n                            category,\n                            name,\n                            description,\n                            signature,\n                            nonce:variblelNonse,\n                            royalties\n                        });\n\n                        if (res?.id) {\n                            algolia.saveObject({\n                                objectID: res?.id,\n                                id: res?.id,\n                                tokenId: 0,\n                                tokenURI,\n                                ownerAvatar: user?.avatar || \"/assets/img/avatars/avatar.jpg\",\n                                owner: account,\n                                creator: account,\n                                price: parseFloat(price),\n                                paymentType: paymentType,\n                                isSale,\n                                saleType: \"fix\",\n                                auctionLength: 0,\n                                auctionCreator: null,\n                                time: 0,\n                                likes: [],\n                                created: moment().valueOf(),\n                                type,\n                                category,\n                                name,\n                                description,\n                            });\n                            firestore.collection(\"history\").add({\n                                userId: account,\n                                oldUserId: account,\n                                nftId: res.id,\n                                actionType: 0,\n                                price: parseFloat(price),\n                                paymentType: paymentType,\n                                time: moment().valueOf(),\n                            });\n                            toast.success(\"Create NFT\");\n                            setCreateProcess(false);\n                            history.push(`/creator/${account}`);\n                        } else {\n                            setCreateProcess(false);\n                            toast.error(\"Create failed.\");\n                        }\n                    }\n                } else {\n                    toast.error(\"Uploading failed\");\n                    setCreateProcess(false);\n                }\n            }\n        } catch (err) {\n            setCreateProcess(false);\n            console.log(err);\n        }\n    };\n\n    const dispatchUser = async (user_id) => {\n        if (user_id) {\n            const userInfo = (\n                await firestore.collection(\"users\").doc(user_id).get()\n            ).data();\n            dispatch({type: \"SET_PROFILE\", userInfo});\n            setUser(userInfo);\n        }\n    };\n    useEffect(() => {\n        dispatchUser(account);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [account]);\n    return (\n        <main className=\"buyFlokin\" style={{paddingTop: 90}}>\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-lg-6 pr-1 createPart\">\n\n                        <h2 class=\"createStepLabel\">Upload file</h2>\n                        {type === \"audio\" ? (\n                            <div className=\"nftdropzone\">\n                                <NFTDropzone\n                                    nftType=\"Audio\"\n                                    onChange={(newfile) => {\n                                        setFile(newfile);\n                                        getFile(newfile);\n                                    }}\n                                />\n                            </div>\n                        ) : type === \"video\" ? (\n                            <div className=\"nftdropzone\">\n                                <NFTDropzone\n                                    nftType=\"Video\"\n                                    onChange={(newfile) => {\n                                        setFile(newfile);\n                                        getFile(newfile);\n                                    }}\n                                />\n                            </div>\n                        ) : type === \"image\" ? (\n                            <div className=\"nftdropzone\">\n                                <NFTDropzone\n                                    nftType=\"image\"\n                                    onChange={(newfile) => {\n                                        setFile(newfile);\n                                        getFile(newfile);\n                                    }}\n                                />\n                            </div>\n                        ) : (\n                            \"\"\n                        )}\n\n                        <div className=\"sign__group\">\n                            <h2 className=\"createStepLabel mb-20\">NFT Type</h2>\n                            <select\n                                id=\"type\"\n                                name=\"type\"\n                                className=\"sign__select inputBg\"\n                                onChange={(e) => setType(e.target.value)}\n                            >\n                                <option value=\"image\">NFT Type</option>\n                                <option value=\"image\">Image</option>\n                                <option value=\"audio\">Audio</option>\n                                <option value=\"video\">Video</option>\n                            </select>\n                        </div>\n\n                        <div className=\"sign__group\">\n                            <select\n                                id=\"category\"\n                                name=\"category\"\n                                className=\"sign__select\"\n                                value={category}\n                                onChange={(e) => setCategory(e.target.value)}\n                            >\n                                <option>Category</option>\n                                <option value=\"art\">Art</option>\n                                <option value=\"music\">Music</option>\n                                <option value=\"film\">Film</option>\n                                <option value=\"sports\">Sports</option>\n                                <option value=\"education\">Education</option>\n                                <option value=\"photography\">Photography</option>\n                                <option value=\"games\">Games</option>\n                                <option value=\"other\">Other</option>\n                            </select>\n                        </div>\n\n                        <div className=\"sign__group\">\n                            <select\n                                id=\"type\"\n                                name=\"type\"\n                                className=\"sign__select inputBg\"\n                                onChange={(e) => setType(e.target.value)}\n                            >\n                                <option value=\"image\">Image</option>\n                                <option value=\"audio\">Audio</option>\n                                <option value=\"video\">Video</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"col-12 col-lg-6  pr-1 createPart\">\n                        <h2 className=\"createStepLabel\">Information</h2>\n                        <div className=\"sign__group\">\n                            <input\n                                id=\"name\"\n                                type=\"text\"\n                                name=\"name\"\n                                className=\"sign__input \"\n                                placeholder=\"Title\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                style={{border: '1px solid #FFFFFF33'}}\n                            />\n                        </div>\n\n                        <div className=\"sign__group\">\n              <textarea\n                  id=\"description\"\n                  name=\"description\"\n                  className=\"sign__textarea\"\n                  placeholder=\"Description\"\n                  value={description}\n                  onChange={(e) => setDescription(e.target.value)}\n                  style={{border: '1px solid #FFFFFF33'}}\n              ></textarea>\n                        </div>\n                        <div class=\"mt-50\">\n                            <h2 className=\"createStepLabel\">Sale & Price</h2>\n                        </div>\n                        <div className=\"sign__group\">\n                            <label className=\"sign__label mr-3\" htmlFor=\"sale\">\n                                List for Sale\n                            </label>\n                            <Switch\n                                onChange={() => {\n                                    setIsSale(!isSale);\n                                }}\n                                checked={isSale}\n                                height={26}\n                                class=\"createListSwitch\"\n                            />\n                        </div>\n\n                <div className=\"sign__group\">\n                    <label className=\"sign__label\" htmlFor=\"royalties\">\n                        Royalties\n                    </label>\n                    <button className=\"royaltyBtn\">{royalties}%</button>\n                    <ReactSlider\n                        className=\"horizontal-slider\"\n                        thumbClassName=\"example-thumb\"\n                        trackClassName=\"example-track\"\n                        defaultValue={7}\n                        value={royalties}\n                        onChange={(e) => {\n                            setRoyalties(e);\n                        }}\n                        min={1}\n                        max={20}\n                        renderTrack={(props, state) => (\n                            <div {...props}>{state.valueNow}</div>\n                        )} //custom track\n                    />\n                </div>\n\n                {isSale && (\n                    <div className=\"sign__group\">\n\n                        <select\n                            id=\"saleType\"\n                            name=\"saleType\"\n                            className=\"sign__select \"\n                            value={saleType}\n                            onChange={(e) => setSaleType(e.target.value)}\n                        >\n                            <option>Sale Type</option>\n                            <option value=\"fix\">Fixed</option>\n                            <option value=\"auction\">Auction</option>\n                        </select>\n\n                        <div className=\"sign__group\">\n                            <input\n                                id=\"price\"\n                                type=\"number\"\n                                value={price}\n                                onChange={(e) => setPrice(e.target.value)}\n                                name=\"price\"\n                                className=\"sign__input\"\n                                placeholder=\"BNB Price\"\n                            />\n                        </div>\n                        {saleType === \"auction\" && (\n                            <div className=\"sign__group\">\n                                <select\n                                    id=\"length\"\n                                    name=\"length\"\n                                    className=\"sign__select mt-0\"\n                                    value={auctionLength}\n                                    onChange={(e) => setAuctionLength(e.target.value)}\n                                >\n                                    <option>Auction Length</option>\n                                    <option value=\"1\">1 hour</option>\n                                    <option value=\"12\">12 hours</option>\n                                    <option value=\"24\">24 hours</option>\n                                    <option value=\"72\">3 days</option>\n                                    <option value=\"168\">7 days</option>\n                                </select>\n                            </div>\n                        )}\n                    </div>\n                )}\n                    </div>\n                    </div>\n                <div className=\"col-12 text-center mb-100\">\n                    <button\n                        type=\"button\"\n                        className=\"btn-glow btn-hover-shine\"\n                        onClick={createNFT}\n                        disabled={isCreateProcess}\n                    >\n                        {isCreateProcess ? \"Creating...\" : \"Create NFT\"}\n                    </button>\n                </div>\n            </div>\n\n\n        </main>\n    )\n        ;\n}\n\nexport default Create;"]},"metadata":{},"sourceType":"module"}