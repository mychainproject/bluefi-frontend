{"ast":null,"code":"var _jsxFileName = \"/home/hp/Desktop/Bluefi/bleufi-frontend/src/components/Product/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useWeb3React } from \"@web3-react/core\"; // import { HeartIcon } from \"@heroicons/react/outline\";\n\nimport { HeartIcon } from \"@heroicons/react/solid\";\nimport \"./style.css\";\nimport { firestore } from \"../../firebase\";\nimport AudioImage from \"../Card/AudioImage\";\nimport VideoImage from \"../Card/VideoImage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Product(props) {\n  _s();\n\n  var _props$data, _props$data2, _props$data3;\n\n  const {\n    id,\n    type,\n    image,\n    category,\n    isSale,\n    imageAttach,\n    time,\n    name,\n    owner,\n    creator,\n    price,\n    saleType,\n    likes,\n    auctionCreator\n  } = props.data;\n  const dispatch = useDispatch();\n  const {\n    account\n  } = useWeb3React();\n\n  const dispatchNftItem = async payload => {\n    await dispatch({\n      type: \"SET_SELECTED\",\n      payload\n    });\n  };\n\n  const [nickName, setNickName] = useState(\"@unkown\");\n  const [follow, setFollow] = useState(likes);\n\n  const getAvatar = async () => {\n    const url = (await firestore.collection(\"users\").doc(time > 0 && auctionCreator ? auctionCreator : owner).get()).data();\n\n    if (url) {\n      setNickName(url === null || url === void 0 ? void 0 : url.nickName);\n    }\n  };\n\n  const increaseLikes = () => {\n    if (account) {\n      const user_index = follow.indexOf(account);\n\n      if (creator === account) {\n        toast.error(\"You are a creator\");\n        return;\n      }\n\n      let temp = [...follow];\n\n      if (user_index > -1) {\n        temp[user_index] = temp[temp.length - 1];\n        temp.pop();\n      } else {\n        temp = [...temp, account];\n      }\n\n      firestore.collection(\"nfts\").doc(id).update({\n        likes: temp,\n        likesCount: temp.length\n      }).then(() => {\n        setFollow(temp);\n        toast.success(`You ${user_index === -1 ? \"\" : \"un\"}like the NFT`);\n      }).catch(err => {\n        toast.error(err);\n      });\n    } else {\n      toast.error(\"Please connect your wallet first\");\n    }\n  };\n\n  useEffect(() => {\n    getAvatar();\n  });\n  useEffect(() => {\n    setFollow(props.data.likes);\n  }, [props.data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product\",\n    children: [type === \"image\" && /*#__PURE__*/_jsxDEV(Link, {\n      to: `/item/${id}`,\n      onClick: () => dispatchNftItem(props.data),\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: image,\n        alt: \"\",\n        className: \"product_image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), type === \"audio\" && /*#__PURE__*/_jsxDEV(Link, {\n      to: `/item/${id}`,\n      children: /*#__PURE__*/_jsxDEV(AudioImage, {\n        src: image,\n        onClick: e => {\n          e.preventDefault();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this), type === \"video\" && /*#__PURE__*/_jsxDEV(Link, {\n      to: `/item/${id}`,\n      onClick: () => dispatchNftItem(props.data),\n      children: /*#__PURE__*/_jsxDEV(VideoImage, {\n        src: image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"product_comment\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productCategory\",\n        children: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productTitle\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"productCreator\",\n        children: nickName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product_comment5\",\n        children: [price, \" BNB\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"d-flex mt-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/item/${id}`,\n            className: \"product_comment1\",\n            children: time === 0 && ((_props$data = props.data) === null || _props$data === void 0 ? void 0 : _props$data.owner) === account || time > 0 && ((_props$data2 = props.data) === null || _props$data2 === void 0 ? void 0 : _props$data2.auctionCreator) === account ? ((_props$data3 = props.data) === null || _props$data3 === void 0 ? void 0 : _props$data3.isSale) ? \"Delist\" : \"List for sale\" : \"Buy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product_comment6 hearLike\",\n          onClick: increaseLikes,\n          children: [follow === null || follow === void 0 ? void 0 : follow.length, \" \", (follow === null || follow === void 0 ? void 0 : follow.includes(account)) ? /*#__PURE__*/_jsxDEV(HeartIcon, {\n            className: \"heartIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 59\n          }, this) : /*#__PURE__*/_jsxDEV(HeartIcon, {\n            className: \"heartIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 98\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Product, \"3eIDmypWBLLDr9qYw3VYAU1QhI4=\", false, function () {\n  return [useDispatch, useWeb3React];\n});\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["/home/hp/Desktop/Bluefi/bleufi-frontend/src/components/Product/index.js"],"names":["React","useState","useEffect","useDispatch","Link","toast","useWeb3React","HeartIcon","firestore","AudioImage","VideoImage","Product","props","id","type","image","category","isSale","imageAttach","time","name","owner","creator","price","saleType","likes","auctionCreator","data","dispatch","account","dispatchNftItem","payload","nickName","setNickName","follow","setFollow","getAvatar","url","collection","doc","get","increaseLikes","user_index","indexOf","error","temp","length","pop","update","likesCount","then","success","catch","err","e","preventDefault","includes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nimport { useWeb3React } from \"@web3-react/core\";\n// import { HeartIcon } from \"@heroicons/react/outline\";\nimport { HeartIcon } from \"@heroicons/react/solid\";\nimport \"./style.css\";\n\nimport { firestore } from \"../../firebase\";\nimport AudioImage from \"../Card/AudioImage\";\nimport VideoImage from \"../Card/VideoImage\";\n\nfunction Product(props) {\n  const {\n    id,\n    type,\n    image,\n    category,\n    isSale,\n    imageAttach,\n    time,\n    name,\n    owner,\n    creator,\n    price,\n    saleType,\n    likes,\n    auctionCreator\n  } = props.data;\n\n  const dispatch = useDispatch();\n  const { account } = useWeb3React();\n  const dispatchNftItem = async (payload) => {\n    await dispatch({ type: \"SET_SELECTED\", payload });\n  };\n\n  const [nickName, setNickName] = useState(\"@unkown\");\n  const [follow, setFollow] = useState(likes);\n\n  const getAvatar = async () => {\n    const url = (\n      await firestore\n        .collection(\"users\")\n        .doc(time > 0 && auctionCreator ? auctionCreator : owner)\n        .get()\n    ).data();\n    if (url) {\n      setNickName(url?.nickName);\n    }\n  };\n\n  \n  const increaseLikes = () => {\n    if (account) {\n      const user_index = follow.indexOf(account);\n      if (creator === account) {\n        toast.error(\"You are a creator\");\n        return;\n      }\n      let temp = [...follow];\n      if (user_index > -1) {\n        temp[user_index] = temp[temp.length - 1];\n        temp.pop();\n      } else {\n        temp = [...temp, account];\n      }\n      firestore\n        .collection(\"nfts\")\n        .doc(id)\n        .update({ likes: temp, likesCount: temp.length })\n        .then(() => {\n          setFollow(temp);\n          toast.success(`You ${user_index === -1 ? \"\" : \"un\"}like the NFT`);\n        })\n        .catch((err) => {\n          toast.error(err);\n        });\n    } else {\n      toast.error(\"Please connect your wallet first\");\n    }\n  };\n\n  useEffect(() => {\n    getAvatar();\n  });\n\n  useEffect(() => {\n    setFollow(props.data.likes);\n  }, [props.data]);\n  return (\n    <div className=\"product\">\n      {type === \"image\" && (\n        <Link\n          to={`/item/${id}`}\n          onClick={() => dispatchNftItem(props.data)}\n        >\n          <img src={image} alt=\"\" className=\"product_image\" />\n        </Link>\n      )}\n      {type === \"audio\" && (\n        <Link\n          to={`/item/${id}`}\n        >\n          <AudioImage\n            src={image}\n            onClick={(e) => {\n              e.preventDefault();\n            }}\n          />\n        </Link>\n      )}\n      {type === \"video\" && (\n        <Link\n          to={`/item/${id}`}\n          onClick={() => dispatchNftItem(props.data)}\n        >\n          <VideoImage src={image} />\n        </Link>\n      )}\n      <h3 className=\"product_comment\">\n        {/* <a href=\"/\" className=\"product_comment2\">{comment1}</a> */}\n        <div className=\"productCategory\">{category}</div>\n        <div className=\"productTitle\">{name}</div>\n        <div className=\"productCreator\">{nickName}</div>\n        <div className=\"product_comment5\">{price} BNB</div>\n\n        <div class=\"d-flex mt-10\">\n          <div>\n            <Link to={`/item/${id}`} className=\"product_comment1\">\n              {(time === 0 && props.data?.owner === account) || (time > 0 && props.data?.auctionCreator === account)\n                  ? props.data?.isSale ? \"Delist\" : \"List for sale\"\n                  : \"Buy\"}\n            </Link>\n          </div>\n          <div className=\"product_comment6 hearLike\" onClick={increaseLikes}>\n            {follow?.length} {follow?.includes(account) ? <HeartIcon className=\"heartIcon\" />  : <HeartIcon className=\"heartIcon\" />}\n\n          </div>\n\n        </div>\n\n\n\n      </h3>\n    </div>\n  );\n}\nexport default Product;"]},"metadata":{},"sourceType":"module"}